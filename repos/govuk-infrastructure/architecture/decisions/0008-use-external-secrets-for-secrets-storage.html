

<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>govuk-infrastructure: 8. Use external-secrets for secrets storage - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/repos/govuk-infrastructure/architecture/decisions/0008-use-external-secrets-for-secrets-storage.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="govuk-infrastructure: 8. Use external-secrets for secrets storage - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/repos/govuk-infrastructure/architecture/decisions/0008-use-external-secrets-for-secrets-storage.html" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="govuk-infrastructure: 8. Use external-secrets for secrets storage" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/repos/govuk-infrastructure/architecture/decisions/0008-use-external-secrets-for-secrets-storage.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/apps.html" aria-current="page">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
    <li>
      <a href="/repos/govuk-infrastructure.html" rel="noopener" class="govuk-link">govuk-infrastructure</a>
    </li>
    <li>
      <ul>
            <li><a href="/repos/govuk-infrastructure/README.html" rel="noopener" class="govuk-link">Introduction to GOV.UK infrastructure</a></li>
    <li><a href="/repos/govuk-infrastructure/cluster-upgrade.html" rel="noopener" class="govuk-link">Upgrading the cluster</a></li>
    <li><a href="/repos/govuk-infrastructure/create-a-new-environment.html" rel="noopener" class="govuk-link">Create a new environment</a></li>
    <li><a href="/repos/govuk-infrastructure/kubernetes-external-secrets.html" rel="noopener" class="govuk-link">Kubernetes external secrets</a></li>
    <li><a href="/repos/govuk-infrastructure/prerequisite-secrets.html" rel="noopener" class="govuk-link">Prerequisite secrets</a></li>
    <li><a href="/repos/govuk-infrastructure/setting-up-content-delivery-network.html" rel="noopener" class="govuk-link">setting-up-content-delivery-network</a></li>
    <li><a href="/repos/govuk-infrastructure/terraform-shared-modules.html" rel="noopener" class="govuk-link">Shared Terraform modules</a></li>
    <li class="subdir__heading">architecture</li>
    <ul class="subdir__menu">
          <li class="subdir__heading">decisions</li>
    <ul class="subdir__menu">
          <li><a href="/repos/govuk-infrastructure/architecture/decisions/0000-TEMPLATE.html" rel="noopener" class="govuk-link">0000-TEMPLATE</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0001-record-architecture-decisions.html" rel="noopener" class="govuk-link">1. Record architecture decisions</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0002-use-aws-eks-terraform-module.html" rel="noopener" class="govuk-link">2. Use `aws-eks` Terraform module</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0003-split-terraform-state-into-separate-aws-cluster-and-kubernetes-resource-phases.html" rel="noopener" class="govuk-link">3. Split Terraform state into separate AWS cluster and Kubernetes resource phases</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0004-use-aws-load-balancer-controller-for-edge-traffic-services.html" rel="noopener" class="govuk-link">0004-use-aws-load-balancer-controller-for-edge-traffic-services</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0005-use-eks-managed-node-groups.html" rel="noopener" class="govuk-link">0005-use-eks-managed-node-groups</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0006-use-helm-for-application-package-management.html" rel="noopener" class="govuk-link">6. Use Helm for application package management</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0007-use-fluentbit-elasticsearch-and-kibana-for-application-logs.html" rel="noopener" class="govuk-link">0007-use-fluentbit-elasticsearch-and-kibana-for-application-logs</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0008-use-external-secrets-for-secrets-storage.html" rel="noopener" class="govuk-link">8. Use external-secrets for secrets storage</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0009-use-external-dns-for-dns-record-management.html" rel="noopener" class="govuk-link">9. Use `external-dns` for DNS record management</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0010-use-dex-idp-for-user-web-authentication.html" rel="noopener" class="govuk-link">10. Use Dex IdP for user web authentication</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0011-use-graviton-for-compute-instances.html" rel="noopener" class="govuk-link">0011-use-graviton-for-compute-instances</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0012-non-govuk-domain-policy.html" rel="noopener" class="govuk-link">0012-non-govuk-domain-policy</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0013-expose-external-metrics-for-hpa.html" rel="noopener" class="govuk-link">0013-expose-external-metrics-for-hpa</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0014-replace-terraform-cloud.html" rel="noopener" class="govuk-link">14. Replace Terraform Cloud backend with AWS S3</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0015-maintain-a-readonly-role.html" rel="noopener" class="govuk-link">15. Maintain a read-only IAM role</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0016-use-iam-roles-for-services.html" rel="noopener" class="govuk-link">16. Use IAM roles for external services and applications</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0017-retire-use-of-github-topics-for-config-management.html" rel="noopener" class="govuk-link">17. Retire use of GitHub topics for configuration management</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0018-use-concourse-ci.html" rel="noopener" class="govuk-link">0018-use-concourse-ci</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0019-restructure-cicd.html" rel="noopener" class="govuk-link">19. Restructure CI/CD</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0020-use-crossplane-for-abstraction.html" rel="noopener" class="govuk-link">20. Use Crossplane for abstraction</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0021-give-fastly-cname-records-a-TTL-of-300.html" rel="noopener" class="govuk-link">21. Give Fastly CNAME records a TTL of 300</a></li>
    <li><a href="/repos/govuk-infrastructure/architecture/decisions/0022-use-pkl-for-configuration.html" rel="noopener" class="govuk-link">22. Use Pkl for configuration</a></li>

    </ul>

    </ul>
    <li class="subdir__heading">logit</li>
    <ul class="subdir__menu">
          <li class="subdir__heading">logit</li>
    <ul class="subdir__menu">
          <li><a href="/repos/govuk-infrastructure/logit/logit/README.html" rel="noopener" class="govuk-link">Intro</a></li>

    </ul>

    </ul>

      </ul>
    </li>
  </ul>

              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Repos",
        "@id": "http://www.dev.gov.uk/repos.html"
      }
    },
    {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "name": "govuk-infrastructure",
        "@id": "http://www.dev.gov.uk/repos/govuk-infrastructure.html"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/repos.html">Repos</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;3&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/repos/govuk-infrastructure.html">govuk-infrastructure</a>
        </li>
  </ol>
</nav>
  <div class="govuk-!-font-size-16 govuk-!-margin-top-6">

  Last updated: <a href="https://github.com/alphagov/govuk-infrastructure/commit/102bf2c801f44ffe6a3df2587edab69444b97257">14 Jan 2026</a>
</div>

  <h1 class="page-title">govuk-infrastructure: 8. Use external-secrets for secrets storage</h1>

  
<p>Date: 2021-08-26</p>
<h2 id="status">Status</h2>
<p>Accepted</p>
<h2 id="context">Context</h2>
<p>We want to make use of AWS SecretsManager for secrets storage, rather than relying solely on Kubernetes secrets. We want
to do this because we want the ability to reconstitute the full state of a running cluster from an external source of truth.
In most cases the external source of truth is a Git repository, but there are significant challenges and pain points when
managing sensitive config in Git repositories. These pains are the driver for using SecretsManager.</p>
<p>We must maintain end-to-end encryption of secrets, up until the point a running container uses a secret, where Kubernetes
must necessarily decrypt the secret for use.</p>
<p>We must be able to enforce access control on secrets, following the principle of least privilege.</p>
<p>We must be able to support rotation of secrets in AWS SecretsManager, where a change of value in AWS is automatically
propagated to services in the cluster.</p>
<p>Kubernetes should expose secrets to pods as <code>Secret</code> resources, to allow the use of standard patterns and existing
third-party Kubernetes projects (primarily Helm charts). The use of externally-managed secrets should have a minimal
impact on development teams, and Helm chart and Kubernetes resource authors, because we will manage the SecretsManager
integration at a cluster level.</p>
<p>Several projects exist for AWS SecretsManager integration with Kubernetes Secrets, the most notable being:</p>
<ul>
<li><a href="https://secrets-store-csi-driver.sigs.k8s.io">Secrets Store Container Storage Interface (CSI) Driver</a></li>
<li><a href="https://github.com/external-secrets/external-secrets"><code>external-secrets</code></a></li>
<li><a href="https://github.com/external-secrets/kubernetes-external-secrets"><code>kubernetes-external-secrets</code></a></li>
</ul>
<p>Secrets Store CSI is a <a href="https://github.com/kubernetes/community/blob/master/sig-list.md">Kubernetes Special Interest Group (SIG)</a>
project. It aims to implement external secrets in Kubernetes clusters by using the <a href="https://kubernetes.io/blog/2019/01/15/container-storage-interface-ga/">Container Storage Interface</a>,
a standard for exposing file and block interfaces to containers.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><code>external-secrets</code> and <code>kubernetes-external-secrets</code> are closely-related projects that have been brought together as
part of the <a href="https://github.com/external-secrets">external-secrets</a> GitHub org, which has worked to unify many projects in this space and create
a <a href="https://github.com/external-secrets/crd-spec/blob/main/Spec.md">single specification for an external secrets Custom Resource Definition</a>.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><code>external-secrets</code> is the successor project to <code>kubernetes-external-secrets</code>, which rewrites
the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Kubernetes Operator</a> in Go rather than JavaScript,
and adopts the standardised Custom Resource Definition (CRD). It also changes the resource object model to separate
using secrets in the application, and the specific access and authentication and authorization implementation for a given external secret backend.
Both projects support AWS SecretsManager, HashiCorp Vault, and Google Cloud Platform and Azure equivalents. The project maintainers view
<code>kubernetes-external-secrets</code> as on a deprecation path, and <code>external-secrets</code> is currently classed as alpha:</p>
<blockquote>
<p>[Kubernetes External Secrets]: a very popular solution that came from within Godaddy and was written in JS and
supports a lot of providers (but will be deprecated)</p>
<p>[External Secrets]: New solution written in golang, aspires to support all the same providers, but we are still
working on getting most of the providers stable and out of alpha. Eventually, the idea is to substitute KES. Anyways the
migration is pretty much like @Flydiverny said since retro-compatibility with original solutions was not something that
we aimed for. Completely new CRD and all that.</p>
</blockquote>
<p>(from <a href="https://kubernetes.slack.com/archives/C017BF84G2Y/p1626186324108900?thread_ts=1626104012.105800&amp;cid=C017BF84G2Y">Kubernetes Slack</a>)</p>
<p>We have created proofs of concept for all three options:</p>
<ol>
<li>
<strong>Secrets Store CSI</strong> - works, but relatively complex to get up and running. Secrets rotation and syncing with
Kubernetes <code>Secrets</code> currently experimental/alpha. The use of CSI volumes as an
abstraction <a href="https://secrets-store-csi-driver.sigs.k8s.io/topics/sync-as-kubernetes-secret.html">requires that secrets get mounted as a volume</a>
on disk even when secrets are only consumed as environment variables by containers. Secrets volume definition in <code>Pods</code> and
<code>Deployments</code> is quite verbose and something of a leaky abstraction, because it must specify the CSI driver and volume attributes.
Overall CSI feels like the wrong abstraction for external secret stores, because they are fundamentally neither file nor
block storage.</li>
<li>
<strong><code>kubernetes-external-secrets</code></strong> - Quick and easy to get up and running and simple to use within an application it
requires only one resource: <code>ExternalSecret</code>. Works as expected with <a href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html">IAM Roles for Service Accounts</a>.
In-cluster secrets access control is <a href="https://github.com/external-secrets/kubernetes-external-secrets#scoping-access">relatively basic and coarse-grained</a>.
Does not support a highly-available deployment (replicas) without the risk of excessive API calls or race
conditions.</li>
<li>
<strong><code>external-secrets</code></strong> - More complex to get up and running than <code>kubernetes-external-secrets</code>, and less so than Secrets
Store CSI. Documentation is somewhat thin, although <a href="https://external-secrets.io/spec/">the<code>external-secrets</code> API spec</a>
is comprehensive. Supports <a href="https://external-secrets.io/guides-multi-tenancy/">a few modes of operation for multi-tenancy</a>
and access control. Project is still in a relatively early stage, so APIs might change. Supports highly available
deployments via leadership election.</li>
</ol>
<p>While multi-tenancy is not a primary concern at this stage, we might discover a need for some level of access control and
segregation as we introduce more applications.</p>
<h2 id="decision">Decision</h2>
<p>Use <a href="https://external-secrets.io"><strong><code>external-secrets</code></strong></a>.</p>
<p>While <code>kubernetes-external-secrets</code> is more mature and slightly simpler to deploy and use, it is also on a deprecation
path, with no plans for a migration path to <code>external-secrets</code>.</p>
<p><code>external-secrets</code> is less mature and slightly more complex, but not significantly so, and proof of concept tests did
not raise any significant issues.</p>
<p>Given that the SIG have destined <code>kubernetes-external-secrets</code> for deprecation, we should invest our time in the future-facing
project, even though it is still in a relatively early stage.</p>
<h2 id="consequences">Consequences</h2>
<p>We might find more than average numbers of bugs and changes as the project is in a relatively early stage.</p>
<p>We must establish the structure of secrets in AWS, and IAM roles and access patterns. We will cover them in a future ADR.</p>
<p>To maintain end-to-end encryption of secrets, we will enable
<a href="https://aws.amazon.com/about-aws/whats-new/2020/03/amazon-eks-adds-envelope-encryption-for-secrets-with-aws-kms/">Key Management Service encryption for Kubernetes Secrets</a>.</p>
<p>Secret rotation does not automatically restart secrets-consuming <code>Pods</code>; this is true of all three projects. We would
require a separate component <a href="https://github.com/stakater/Reloader">such as <code>Reloader</code></a> to implement this.</p>

  <script>
    /*
      Manually trigger the styling of the 'current page' in the sidebar,
      as it does not happen automatically because we are still technically
      in single page mode.
    */
    (function () {
        'use strict'
        /*
          Cannot use `$(document).ready` on next line as jQuery has not loaded
          yet. But we can use jQuery in the callback.
        */
        window.addEventListener('load', function () {
            try {
                new GOVUK.Modules.InPageNavigation().start($("html"));
            }
            catch (error) {
                /* Fail without causing other JS in the page to break */
                console.log("Error calling GOVUK's InPageNavigation module", error);
            }
        })
    }());
</script>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-infrastructure/blob/main/docs/architecture/decisions/0008-use-external-secrets-for-secrets-storage.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Frepos%2Fgovuk-infrastructure%2Farchitecture%2Fdecisions%2F0008-use-external-secrets-for-secrets-storage.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
