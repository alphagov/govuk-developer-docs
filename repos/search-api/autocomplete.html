

<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>search-api: Autocomplete - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/repos/search-api/autocomplete.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="search-api: Autocomplete - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/repos/search-api/autocomplete.html" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="search-api: Autocomplete" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/repos/search-api/autocomplete.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/apps.html" aria-current="page">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
    <li>
      <a href="/repos/search-api.html" rel="noopener" class="govuk-link">search-api</a>
    </li>
    <li>
      <ul>
            <li><a href="/repos/search-api/adding-new-fields.html" rel="noopener" class="govuk-link">Adding new fields to a document type</a></li>
    <li><a href="/repos/search-api/autocomplete.html" rel="noopener" class="govuk-link">Autocomplete</a></li>
    <li><a href="/repos/search-api/content-api.html" rel="noopener" class="govuk-link">Internal "content API"</a></li>
    <li><a href="/repos/search-api/documents.html" rel="noopener" class="govuk-link">Documents API (to be deprecated)</a></li>
    <li><a href="/repos/search-api/indexing.html" rel="noopener" class="govuk-link">Indexing</a></li>
    <li><a href="/repos/search-api/new-indexing-process.html" rel="noopener" class="govuk-link">Moving a format to the new indexing process</a></li>
    <li><a href="/repos/search-api/relevancy.html" rel="noopener" class="govuk-link">Relevancy</a></li>
    <li><a href="/repos/search-api/schemas.html" rel="noopener" class="govuk-link">Schema definitions</a></li>
    <li><a href="/repos/search-api/search-quality-metrics.html" rel="noopener" class="govuk-link">Search Quality Metrics</a></li>
    <li><a href="/repos/search-api/updating_popularity.html" rel="noopener" class="govuk-link">How Search API Populates Popularity Fields</a></li>
    <li><a href="/repos/search-api/using-the-search-api.html" rel="noopener" class="govuk-link">Using the search API</a></li>
    <li class="subdir__heading">arch</li>
    <ul class="subdir__menu">
          <li><a href="/repos/search-api/arch/adr-001-use-of-both-rabbitmq-and-sidekiq-queues.html" rel="noopener" class="govuk-link">Decision record: use of both RabbitMQ (bunny) and Redis (Sidekiq) queuing systems</a></li>
    <li><a href="/repos/search-api/arch/adr-002-handle-race-conditions-in-govuk-index.html" rel="noopener" class="govuk-link">Decision record: use versioning to handle race conditions when updating the govuk index</a></li>
    <li><a href="/repos/search-api/arch/adr-003-popularity-updating-without-index-locks.html" rel="noopener" class="govuk-link">Decision record: perform popularity updating without using an index lock</a></li>
    <li><a href="/repos/search-api/arch/adr-004-transition-mainstream-to-publishing-api-index.html" rel="noopener" class="govuk-link">Decision record: Transition mainstream formats to a Publishing API derived search index</a></li>
    <li><a href="/repos/search-api/arch/adr-005-incremental-popularity-updates.html" rel="noopener" class="govuk-link">Decision record: Incremental popularity updates</a></li>
    <li><a href="/repos/search-api/arch/adr-006-transition-whitehall-to-publishing-api-index.html" rel="noopener" class="govuk-link">Decision record: Transition whitehall documents to a Publishing API derived search index</a></li>
    <li><a href="/repos/search-api/arch/adr-007-batch-processing-of-rabbit-mq-messages.html" rel="noopener" class="govuk-link">Decision record: Batch processing of rabbit MQ messages</a></li>
    <li><a href="/repos/search-api/arch/adr-008-elasticsearch5-upgrade.html" rel="noopener" class="govuk-link">Decision record: Upgrade to Elasticsearch 5</a></li>
    <li><a href="/repos/search-api/arch/adr-009-elasticsearch6-upgrade.html" rel="noopener" class="govuk-link">Decision record: Upgrade to Elasticsearch 6</a></li>
    <li><a href="/repos/search-api/arch/adr-010-learn-to-rank.html" rel="noopener" class="govuk-link">Decision record: Learning To Rank</a></li>
    <li><a href="/repos/search-api/arch/adr-011-sagemaker.html" rel="noopener" class="govuk-link">Decision record: Sagemaker</a></li>
    <li><a href="/repos/search-api/arch/adr-012-learn-to-rank.html" rel="noopener" class="govuk-link">Decision record: Decommissioning Learning to Rank</a></li>
    <li><a href="/repos/search-api/arch/adr-013-rabbitmq-sidekiq-removal.html" rel="noopener" class="govuk-link">Decision record: Removing Sidekiq from RabbitMQ queue consumers</a></li>

    </ul>

      </ul>
    </li>
  </ul>

              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Apps",
        "@id": "http://www.dev.gov.uk/apps.html"
      }
    },
    {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "name": "search-api",
        "@id": "http://www.dev.gov.uk/repos/search-api.html"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/apps.html">Apps</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;3&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/repos/search-api.html">search-api</a>
        </li>
  </ol>
</nav>
  <div class="govuk-!-font-size-16 govuk-!-margin-top-6">

  Last updated: <a href="https://github.com/alphagov/search-api/commit/4c217039041dc6ea8b3d0a32922fa425b766c3c4">1 Dec 2025</a>
</div>

  <h1 class="page-title">search-api: Autocomplete</h1>

  
<p>Autocomplete is a feature that suggests search phrases as you type. In search-api autocomplete is based on popularity data from GA4.</p>
<h2 id="does-autocomplete-work">Does autocomplete work?</h2>
<p>No. Not for users.</p>
<p>Autocomplete was added as an experiment at the close of 2019. However, it doesn't appear that this endpoint was ever added to finder-frontend so it's unlikely that it has been tested with real users.</p>
<p>It is possible to see autocomplete suggestions from elasticsearch in the payload but these suggestions are not shown to the user in the supergroup or specialist finders.</p>
<p>As there were no associated running costs, the endpoint was left in search-api.</p>
<h2 id="how-do-i-see-autocomplete-suggestions-for-a-query">How do I see autocomplete suggestions for a query?</h2>
<p>To see autocomplete suggestions you must add <code>suggest=autocomplete</code> to the query string. For example:</p>
<p>In production visit:
<a href="https://www.gov.uk/api/search.json?q=tax&amp;suggest=autocomplete&amp;count=1">https://www.gov.uk/api/search.json?q=tax&amp;suggest=autocomplete&amp;count=1</a></p>
<p>Or locally go to:
<a href="http://search-api.dev.gov.uk/search?q=tax&amp;suggest=autocomplete&amp;count=1">http://search-api.dev.gov.uk/search?q=tax&amp;suggest=autocomplete&amp;count=1</a></p>
<p>You should see something similar to:</p>
<pre lang="json"><code>"suggested_autocomplete": [
  "Tax your vehicle",
  "Tax-Free Childcare",
  "Tax overpayments and underpayments",
  "Tax codes",
  "Tax on savings interest",
  "Tax your vehicle without a vehicle tax reminder",
  "Tax on dividends",
  "Tax when you sell property"
],
</code></pre>
<!-- raw HTML omitted -->
<pre lang="json"><code>{
  "results": [
    {
      "description": "Renew or tax your vehicle for the first time using a reminder letter, your log book or the green 'new keeper' slip - and how to tax if you do not have any documents",
      "format": "transaction",
      "link": "/vehicle-tax",
      "organisations": [
        {
          "organisation_type": "executive_agency",
          "organisation_state": "live",
          "acronym": "DVLA",
          "content_id": "70580624-93b5-4aed-823b-76042486c769",
          "parent_organisations": [
            "department-for-transport"
          ],
          "link": "/government/organisations/driver-and-vehicle-licensing-agency",
          "title": "Driver and Vehicle Licensing Agency",
          "analytics_identifier": "EA74",
          "organisation_crest": "single-identity",
          "organisation_brand": "department-for-transport",
          "logo_formatted_title": "Driver &amp; Vehicle\r\nLicensing\r\nAgency",
          "public_timestamp": "2023-08-16T11:17:43.000+01:00",
          "slug": "driver-and-vehicle-licensing-agency"
        }
      ],
      "public_timestamp": "2017-12-07T12:54:39Z",
      "title": "Tax your vehicle",
      "world_locations": [],
      "topical_events": [],
      "organisation_content_ids": [
        "70580624-93b5-4aed-823b-76042486c769"
      ],
      "expanded_organisations": [
        {
          "organisation_type": "executive_agency",
          "organisation_state": "live",
          "acronym": "DVLA",
          "content_id": "70580624-93b5-4aed-823b-76042486c769",
          "parent_organisations": [
          "department-for-transport"
          ],
          "link": "/government/organisations/driver-and-vehicle-licensing-agency",
          "title": "Driver and Vehicle Licensing Agency",
          "analytics_identifier": "EA74",
          "organisation_crest": "single-identity",
          "organisation_brand": "department-for-transport",
          "logo_formatted_title": "Driver &amp; Vehicle\r\nLicensing\r\nAgency",
          "public_timestamp": "2023-08-16T11:17:43.000+01:00",
          "slug": "driver-and-vehicle-licensing-agency"
        }
      ],
      "index": "govuk",
      "es_score": 17.194002,
      "_id": "/vehicle-tax",
      "elasticsearch_type": "edition",
      "document_type": "edition"
    }
  ],
  "total": 79464,
  "start": 0,
  "aggregates": {},
  "suggested_queries": [],
  "suggested_autocomplete": [
    "Tax your vehicle",
    "Tax-Free Childcare",
    "Tax overpayments and underpayments",
    "Tax codes",
    "Tax on savings interest",
    "Tax your vehicle without a vehicle tax reminder",
    "Tax on dividends",
    "Tax when you sell property"
  ],
  "es_cluster": "A"
}
</code></pre>
<!-- raw HTML omitted -->
<h2 id="how-are-autocomplete-suggestions-added-to-elasticsearch">How are autocomplete suggestions added to elasticsearch?</h2>
<p>Autocomplete suggestions are added to elasticsearch via the <code>update_popularity</code> rake task. Currently this job runs <a href="https://github.com/alphagov/govuk-helm-charts/blob/56f522f6722ba6a4e713ee852f2b170f93cbeafc/charts/app-config/values-production.yaml#L2914">once per day</a>. The title of the page and a "weighting" are passed to elasticsearch (See <a href="https://github.com/alphagov/search-api/blob/37281b48495f58dedb5aad58ce8fc42cfdae6159/lib/govuk_index/popularity_job.rb#L39-L41">PopularityJob</a>).</p>
<p>You can see the payload that is sent to elasticsearch by querying the internal <a href="https://github.com/alphagov/search-api/blob/37281b48495f58dedb5aad58ce8fc42cfdae6159/docs/content-api.md">content-api</a></p>
<p>For example visiting <a href="http://search-api.dev.gov.uk/content?link=/search/services">http://search-api.dev.gov.uk/content?link=/search/services</a> will show the following at the bottom of the payload:</p>
<pre lang="json"><code>"autocomplete": {
  "input": "Services",
  "weight": 234796
}
</code></pre>
<!-- raw HTML omitted -->
<pre lang="json"><code>{
  "index": "govuk",
  "raw_source": {
    "content_id": "f6d779ac-5f78-413d-a1ff-da391944e6ec",
    "content_purpose_document_supertype": "navigation",
    "content_purpose_subgroup": "other",
    "content_purpose_supergroup": "other",
    "content_store_document_type": "finder",
    "description": "Find services from government",
    "document_type": "edition",
    "email_document_supertype": "other",
    "facet_groups": [],
    "facet_values": [],
    "first_published_at": "2019-02-14T14:55:27Z",
    "format": "finder",
    "government_document_supertype": "other",
    "is_historic": false,
    "is_political": false,
    "is_withdrawn": false,
    "link": "/search/services",
    "mainstream_browse_page_content_ids": [],
    "mainstream_browse_pages": [],
    "navigation_document_supertype": "other",
    "organisation_content_ids": [],
    "organisations": [],
    "part_of_taxonomy_tree": [],
    "people": [],
    "policy_groups": [],
    "popularity": 0.0012836970474967907,
    "popularity_b": 234796,
    "primary_publishing_organisation": [],
    "public_timestamp": "2020-03-25T11:59:34Z",
    "updated_at": "2020-03-25T11:59:35.444+00:00",
    "publishing_app": "search-api",
    "role_appointments": [],
    "roles": [],
    "rendering_app": "finder-frontend",
    "search_user_need_document_supertype": "government",
    "specialist_sectors": [],
    "taxons": [],
    "title": "Services",
    "topic_content_ids": [],
    "topical_events": [],
    "user_journey_document_supertype": "finding",
    "view_count": 14375,
    "world_locations": [],
    "autocomplete": {
      "input": "Services",
      "weight": 234796
    }
  }
}
</code></pre>
<!-- raw HTML omitted -->
<h2 id="what-does-the-autocomplete-payload-returned-from-elasticsearch-look-like">What does the autocomplete payload returned from elasticsearch look like?</h2>
<p>If you set your logging level to DEBUG you should be able to see the response from elasticsearch that includes any autocomplete suggestions.</p>
<p>For example if you visit <a href="http://search-api.dev.gov.uk/search?q=tax&amp;suggest=autocomplete&amp;count=1">http://search-api.dev.gov.uk/search?q=tax&amp;suggest=autocomplete&amp;count=1</a> locally, you should see something similar to:</p>
<!-- raw HTML omitted -->
<pre lang="ruby"><code>{
  "took" =&gt; 613, 
  "timed_out" =&gt; false, 
  "_shards" =&gt; {
    "total" =&gt; 9, "successful" =&gt; 9, "skipped" =&gt; 0, "failed" =&gt; 0
  }, "
  hits" =&gt; {
    "total" =&gt; 49659, 
    "max_score" =&gt; 1000016.56, 
    "hits" =&gt; [{
      "_index" =&gt; "govuk-2023-04-02t21-35-06z-a32d9f2c-8cae-490f-9cc6-f639ba022068",
      "_type" =&gt; "generic-document",
      "_id" =&gt; "/vehicle-tax",
      "_score" =&gt; 1000016.56,
      "_source" =&gt; {
        "link" =&gt; "/vehicle-tax", 
        "format" =&gt; "transaction", 
        "organisation_content_ids" =&gt; ["70580624-93b5-4aed-823b-76042486c769"], 
        "description" =&gt; "Renew or tax your vehicle for the first time using a reminder letter, your log book or the green 'new keeper' slip - and how to tax if you do not have any documents", "title" =&gt; "Tax your vehicle", 
        "mainstream_browse_page_content_ids" =&gt; ["c4cbf7d1-c44e-4f47-b2c8-380e0609f8b0"], "organisations" =&gt; ["driver-and-vehicle-licensing-agency"], 
        "updated_at" =&gt; "2023-04-26T11:01:13.484+01:00", 
        "popularity" =&gt; 0.058823529411764705, 
        "public_timestamp" =&gt; "2017-12-07T12:54:39Z", 
        "indexable_content" =&gt; "Tax your car, motorcycle or other vehicle using a reference number from:\n\na recent reminder (V11) or ‘last chance’ warning letter from DVLA\n\nyour vehicle log book (V5C) - it must be in your name\n\nthe green ‘new keeper’ slip from a log book if you’ve just bought it\n\nIf you do not have any of these documents, you’ll need to apply for a new log book.\n\nYou can pay by debit or credit card, or Direct Debit.\n\nYou must tax your vehicle even if you do not have to pay anything, for example if you’re exempt because you’re disabled.\n\nYou’ll need to meet all the legal obligations for drivers before you can drive.\n\nThis service is also available in Welsh.\n\n\n\nChange your car’s tax class to or from ‘disabled’\n\nYou may need to change your vehicle’s tax class, for example if either:\n\nyour car was previously used by a disabled person\n\nyou’re disabled and taxing your car for the first time\n\nYou can only apply at a Post Office.", 
        "topical_events" =&gt; [], 
        "document_type" =&gt; "edition", 
        "world_locations" =&gt; []
      }
    }]
  }, 
  "autocomplete" =&gt; {
    "suggested_autocomplete" =&gt; [{
      "text" =&gt; "tax",
      "offset" =&gt; 0,
      "length" =&gt; 3,
      "options" =&gt; [{
        "text" =&gt; "Taxpayers given more",
        "_index" =&gt; "government-2021-08-12t23-23-51z-f0d661a8-7769-461e-8136-53c5d5c8d6a7",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/government/news/taxpayers-given-more-time-for-voluntary-national-insurance-contributions",
        "_score" =&gt; 234584.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Taxpayers given more time for voluntary National Insurance contributions", "weight" =&gt; 234584
          }
        }
      }, 
      {
        "text" =&gt; "Tax-free allowances ",
        "_index" =&gt; "detailed-2022-10-26t19-54-59z-342f3da4-1159-4433-898f-089272c6c25d",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/guidance/tax-free-allowances-on-property-and-trading-income",
        "_score" =&gt; 233734.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax-free allowances on property and trading income", "weight" =&gt; 233734
          }
        }
      }, 
      {
        "text" =&gt; "Tax treaties",
        "_index" =&gt; "government-2021-08-12t23-23-51z-f0d661a8-7769-461e-8136-53c5d5c8d6a7",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/government/collections/tax-treaties",
        "_score" =&gt; 233235.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax treaties", "weight" =&gt; 233235
          }
        }
      }, 
      {
        "text" =&gt; "Tax relief for resid",
        "_index" =&gt; "detailed-2022-10-26t19-54-59z-342f3da4-1159-4433-898f-089272c6c25d",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/guidance/changes-to-tax-relief-for-residential-landlords-how-its-worked-out-including-case-studies",
        "_score" =&gt; 231379.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax relief for residential landlords: how it's worked out", "weight" =&gt; 231379
          }
        }
      }, 
      {
        "text" =&gt; "Taxation of environm",
        "_index" =&gt; "government-2021-08-12t23-23-51z-f0d661a8-7769-461e-8136-53c5d5c8d6a7",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/government/consultations/taxation-of-environmental-land-management-and-ecosystem-service-markets",
        "_score" =&gt; 231088.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Taxation of environmental land management and ecosystem service markets", "weight" =&gt; 231088
          }
        }
      }, 
      {
        "text" =&gt; "Tax credits: work ou",
        "_index" =&gt; "govuk-2023-04-02t21-35-06z-a32d9f2c-8cae-490f-9cc6-f639ba022068",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/childcare-costs-for-tax-credits",
        "_score" =&gt; 229788.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax credits: work out your childcare costs", "weight" =&gt; 229788
          }
        }
      }, 
      {
        "text" =&gt; "Tax avoidance - don'",
        "_index" =&gt; "government-2021-08-12t23-23-51z-f0d661a8-7769-461e-8136-53c5d5c8d6a7",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/government/case-studies/tax-avoidance-dont-get-caught-out",
        "_score" =&gt; 229608.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax avoidance - don't get caught out", "weight" =&gt; 229608
          }
        }
      }, 
      {
        "text" =&gt; "Tax structure and pa",
        "_index" =&gt; "government-2021-08-12t23-23-51z-f0d661a8-7769-461e-8136-53c5d5c8d6a7",
        "_type" =&gt; "generic-document",
        "_id" =&gt; "/government/collections/tax-structure-and-parameters-statistics",
        "_score" =&gt; 229231.0,
        "_source" =&gt; {
          "autocomplete" =&gt; {
            "input" =&gt; "Tax structure and parameters statistics", "weight" =&gt; 229231
          }
        }
      }]
    }]
  }
}
</code></pre>
<!-- raw HTML omitted -->

  <script>
    /*
      Manually trigger the styling of the 'current page' in the sidebar,
      as it does not happen automatically because we are still technically
      in single page mode.
    */
    (function () {
        'use strict'
        /*
          Cannot use `$(document).ready` on next line as jQuery has not loaded
          yet. But we can use jQuery in the callback.
        */
        window.addEventListener('load', function () {
            try {
                new GOVUK.Modules.InPageNavigation().start($("html"));
            }
            catch (error) {
                /* Fail without causing other JS in the page to break */
                console.log("Error calling GOVUK's InPageNavigation module", error);
            }
        })
    }());
</script>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/search-api/blob/main/docs/autocomplete.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Frepos%2Fsearch-api%2Fautocomplete.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
