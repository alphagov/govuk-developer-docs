

<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Repository: govuk_web_banners - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/repos/govuk_web_banners.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="description" content="Everything about govuk_web_banners (Gem for centralised banner handling)" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="Repository: govuk_web_banners - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/repos/govuk_web_banners.html" />

      <meta property="og:description" content="Everything about govuk_web_banners (Gem for centralised banner handling)" />
      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="Repository: govuk_web_banners" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/repos/govuk_web_banners.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>Weâ€™d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/apps.html" aria-current="page">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
    <li>
      <a href="/repos/govuk_web_banners.html" rel="noopener" class="govuk-link">govuk_web_banners</a>
    </li>
    <li>
      <ul>
        
      </ul>
    </li>
  </ul>

              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Repos",
        "@id": "http://www.dev.gov.uk/repos.html"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/repos.html">Repos</a>
        </li>
  </ol>
</nav>
  
  <h1 class="page-title">Repository: govuk_web_banners</h1>

  <p>Gem for centralised banner handling</p>

<div class="gem-c-summary-list">

      <dl class="govuk-summary-list">
          <div class="govuk-summary-list__row">

            <dt class="govuk-summary-list__key">GitHub</dt>
            <dd class="govuk-summary-list__value"><a href="https://github.com/alphagov/govuk_web_banners">govuk_web_banners</a></dd>



</div>          <div class="govuk-summary-list__row">

            <dt class="govuk-summary-list__key">Ownership</dt>
            <dd class="govuk-summary-list__value"><a href="https://gds.slack.com/channels/govuk-patterns-and-pages">#govuk-patterns-and-pages</a></dd>



</div>          <div class="govuk-summary-list__row">

            <dt class="govuk-summary-list__key">Category</dt>
            <dd class="govuk-summary-list__value">Gems</dd>



</div></dl>
    <div class="gem-c-summary__block"></div>
</div>
<h2 id='readme'>README</h2><p><div class="embedded-readme"></p>

<p>Proof of Concept for centralising handling of Recruitment, Global, and Emergency
banners (currently spread across apps)</p>

<h2 id="usage">Usage</h2>

<h2 id="adding-the-gem-to-your-application">Adding the gem to your application</h2>

<p>Add this line to your application&rsquo;s Gemfile:</p>

<pre lang="ruby"><code>gem "govuk_web_banners"
</code></pre>

<p>And then execute:</p>

<pre lang="bash"><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre lang="bash"><code>$ gem install govuk_web_banners
</code></pre>

<p>Add the JS dependencies to your existing asset dependencies file:</p>

<pre><code>//= require govuk_web_banners/dependencies
</code></pre>

<h2 id="adding-emergency-banners">Adding emergency banners</h2>

<p>Emergency banners are passed to the <a href="https://components.publishing.service.gov.uk/component-guide/layout_for_public">Layout for
Public</a>
component, which is currently applied to each frontend app by the slimmer/static
wrapping code - so you will only need to handle emergency banners in your app
when Slimmer is removed from it. Once Slimmer is removed and you are calling the
layout_for_public component directly in your app, add the emergency banner
partial to the component&rsquo;s <code>emergency_banner:</code> key:</p>

<pre><code>&lt;%= render "govuk_publishing_components/components/layout_for_public", {
  draft_watermark: draft_environment,
  emergency_banner: render("govuk_web_banners/emergency_banner"), # &lt;-- Add this line
  full_width: false,
  ...etc
</code></pre>

<p>if you want the homepage variant of the banner, you can add <code>homepage: true</code> to
the render call:</p>

<pre><code>&lt;%= render "govuk_publishing_components/components/layout_for_public", {
  draft_watermark: draft_environment,
  emergency_banner: render("govuk_web_banners/emergency_banner", homepage: true), # &lt;-- Add this line
  full_width: full_width,
  ...etc
</code></pre>

<p>Your app will also need access to the whitehall shared redis cluster (which is
used to signal the emergency banner is up), via the <code>EMERGENCY_BANNER_REDIS_URL</code>
environment variable (here is an example of <a href="https://github.com/alphagov/govuk-helm-charts/blob/7818eaa22fc194d21548f316bcc5a46c2023dcb6/charts/app-config/values-staging.yaml#L3337-L3338">setting this in
govuk-helm-charts</a>).
You&rsquo;ll need to allow this in all three environments.</p>

<p>Finally, you&rsquo;ll need to configure a connection to the redis cluster, available
at <code>Rails.application.config.emergency_banner_redis_client</code>. The suggested way
of doing this is creating an initializer at
<code>/config/initializers/govuk_web_banners.rb</code> with the content:</p>

<pre><code>Rails.application.config.emergency_banner_redis_client = Redis.new(
  url: ENV["EMERGENCY_BANNER_REDIS_URL"],
  reconnect_attempts: [15, 30, 45, 60],
)
</code></pre>

<h2 id="adding-global-banners">Adding global banners</h2>

<p>Global banners are passed to the <a href="https://components.publishing.service.gov.uk/component-guide/layout_for_public">Layout for
Public</a>
component, which is currently applied to each frontend app by the slimmer/static
wrapping code - so you will only need to handle global banners in your app when
Slimmer is removed from it. Once Slimmer is removed and you are calling the
layout_for_public component directly in your app, add the global banner partial
to the component&rsquo;s <code>global_banner:</code> key:</p>

<pre><code>&lt;%= render "govuk_publishing_components/components/layout_for_public", {
  draft_watermark: draft_environment,
  global_banner: render("govuk_web_banners/global_banner"), # &lt;-- Add this line
  full_width: false,
  ...etc
</code></pre>

<h2 id="updating-banner-information-in-the-gem">Updating banner information in the gem</h2>

<p>Data for the global banners can be found at
<code>config/govuk_web_banners/global_banners.yml</code>. To add a banner to the config,
add an entry under the banners: array. Note that this array must always be
valid, so if there are no banners in the file, it must contain at least
<code>global_banners: []</code></p>

<h3 id="example-banner-entry">Example banner entry</h3>

<pre><code>global_banners:
- name: Banner 1
  title: "Register to Vote"
  title_href: /register-to-vote
  text: "You must register to vote before the election"
  always_visible: false
  exclude_paths:
  - /find-your-local-electoral-office
  start_date: 2024/10/21
  end_date: 2024/11/18
</code></pre>

<p>Each banner must include a <code>title</code>, <code>title_href</code>, <code>text</code>, and a valid <code>start_date</code>.
<code>title_href</code> can be either a valid URL or a path on gov.uk.</p>

<blockquote>
<p>[!NOTE]</p>
<p><code>start_date</code> is <strong>mandatory</strong> here (unlike in recruitment banners) because it&rsquo;s
needed to create a banner_version to pass to the underlying component. This lets
the component reset the cookie that records how many times a banner has been seen
(by default banners are shown only three times, see the <code>always_visible</code> option below.)</p>
</blockquote>

<p>Optional keys are:</p>

<ul>
<li>
<code>name</code> (an identifying name for this banner, not rendered
anywhere)</li>
<li>
<code>always_visible</code> (defaults to false. If false, banner is hidden if the user
has consented to cookies and has seen this banner more than 3 times)</li>
<li>
<code>exclude_paths</code> an array of paths on which the banner should not be shown.
Note that the banner is never shown on the path it points to, this
list is to include any additional pages.</li>
<li>
<code>end_date</code> (the banner stops being active at the <em>start</em> of the day
specified as <code>end_date</code>). Start and end dates must be in the YYYY/MM/DD
format parsable as a YAML -&gt; Date.</li>
</ul>

<h3 id="validations-on-the-global-banners-config-file">Validations on the global banners config file</h3>

<p>The config file will be checked during CI, so an invalid file can&rsquo;t be released
as a gem and we are nudged to make sure it&rsquo;s kept tidy. These checks include:</p>

<ul>
<li>the global_banners array must be a valid YAML array</li>
<li>all banners have a <code>title</code>, <code>title_href</code>, and <code>info_text</code>.</li>
<li>all banners must have a valid <code>start_date</code>.</li>
</ul>

<p>It will also display warnings (but not fail CI)</p>

<ul>
<li>if there are banners that have expired - you are encouraged to remove
obsolete config, but it will not prevent you merging changes.</li>
<li>if <code>title_href</code> of any banner points to a page that are not currently live on
GOV.UK - this may be intentional (if the banner points to a page that isn&rsquo;t
yet published), or it may indicate a typo in the path.</li>
<li>if any <code>exclude_paths</code> value points to a page that is not currently live on
GOV.UK - this may be intentional, or it may indicate a typo in the path.</li>
<li>if two global banners will be active on the same day (this is only a warning
because ultimately we may need this, but the current iteration of the
component does not support it)</li>
</ul>

<p>Note that some of this validation code is in the
<code>/lib/govuk_web_banners/validators/global_banner.rb</code> file, which should be
tested to ensure the checking is valid, but will not be bundled into the
released gem.</p>

<h2 id="adding-recruitment-banners">Adding recruitment banners</h2>

<p>Add a call to the partial in the layout or view that you want banners to appear
in (typically recruitment banners should be in the layout, below the
breadcrumbs and just above the <code>main</code> element):</p>

<pre><code>  &lt;%= render "govuk_web_banners/recruitment_banner" %&gt;
</code></pre>

<h3 id="required-stylesheets">Required stylesheets</h3>

<p>If you are using individual component stylesheets in your app, you should make
sure the call to the recruitment_banner partial is above the call to
render_component_stylesheets in your layout.</p>

<p>If you are <em>not</em> using individual component stylesheets in your app, you will
have to make sure the intervention component&rsquo;s styles are included in your
application stylesheet:</p>

<p><code>@import "govuk_publishing_components/components/intervention"</code></p>

<h2 id="updating-banner-information-in-the-gem">Updating banner information in the gem</h2>

<p>Data for the current set of live banners can be found at
<code>config/govuk_web_banners/recruitment_banners.yml</code>. To add a banner to the
config, add an entry under the banners: array. Note that this array must always
be valid, so if there are no banners in the file, it must contain at least
<code>banners: []</code></p>

<h3 id="example-banner-entry">Example banner entry</h3>

<pre><code>banners:
- name: Banner 1
  suggestion_text: "Help improve GOV.UK"
  suggestion_link_text: "Sign up to take part in user research (opens in a new tab)"
  survey_url: https://google.com
  page_paths:
  - /
  - /foreign-travel-advice
  start_date: 2024/10/21
  end_date: 2024/11/18
  image: hmrc
</code></pre>

<p>The required keys are <code>suggestion_text</code>, <code>suggestion_link_text</code>, and
<code>survey_url</code> (the values to appear in the banner), and <code>page_paths</code> (an array of
paths on which the banner should be shown).</p>

<p>Optional keys are:</p>

<ul>
<li>
<code>name</code> (an identifying name for this banner, not rendered
anywhere)</li>
<li>
<code>start_date</code> the banner becomes active at the <em>start</em> of the day specified.
Must be in the YYYY/MM/DD format parsable as a YAML -&gt; Date.</li>
<li>
<code>end_date</code> (the banner stops being active at the <em>start</em> of the day
specified). Must be in the YYYY/MM/DD format parsable as a YAML -&gt; Date.</li>
<li>
<code>image</code> an image name supported by the <a href="https://components.publishing.service.gov.uk/component-guide/intervention#with_image">interaction banner image option</a>
Currently the only allowable value is <code>hmrc</code>.</li>
</ul>

<h3 id="validations-on-the-recruitment-banners-config-file">Validations on the recruitment banners config file</h3>

<p>The config file will be checked during CI, so an invalid file can&rsquo;t be released
as a gem and we are forced to make sure it&rsquo;s kept tidy. These checks include:</p>

<ul>
<li>the banners array must be a valid YAML array</li>
<li>all banners have a suggestion_text, suggestion_link_text, survey_url and
page_paths</li>
<li>the same page_path is not present on two banners that are active at the same
time</li>
<li>paths must start with a forward-slash (/)</li>
</ul>

<p>It will also display warnings (but not fail CI)</p>

<ul>
<li>if there are banners that have expired - you are encouraged to remove obsolete
config, but it will not prevent you merging changes.</li>
<li>if page_paths point to pages that are not currently live on GOV.UK - this may
be intentional (if the banner is for a page that isn&rsquo;t yet published), or it
may indicate a typo in the path.</li>
</ul>

<p>Note that some of this validation code is in the
<code>lib/govuk_web_banners/validator/recruitment_banner.rb</code> file, which should be
tested to ensure the checking is valid, but will not be bundled into the
released gem.</p>

<h2 id="license">License</h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT
License</a>.</p>
<p></div></p>

  <script>
    /*
      Manually trigger the styling of the 'current page' in the sidebar,
      as it does not happen automatically because we are still technically
      in single page mode.
    */
    (function () {
        'use strict'
        /*
          Cannot use `$(document).ready` on next line as jQuery has not loaded
          yet. But we can use jQuery in the callback.
        */
        window.addEventListener('load', function () {
            try {
                new GOVUK.Modules.InPageNavigation().start($("html"));
            }
            catch (error) {
                /* Fail without causing other JS in the page to break */
                console.log("Error calling GOVUK's InPageNavigation module", error);
            }
        })
    }());
</script>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/main/data/repos.yml">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Frepos%2Fgovuk_web_banners.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
