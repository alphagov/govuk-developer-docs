

<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>whitehall: 6. Config driven content types - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/repos/whitehall/adr/0006-config-driven-content-types.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="whitehall: 6. Config driven content types - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/repos/whitehall/adr/0006-config-driven-content-types.html" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="whitehall: 6. Config driven content types" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/repos/whitehall/adr/0006-config-driven-content-types.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/apps.html" aria-current="page">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
    <li>
      <a href="/repos/whitehall.html" rel="noopener" class="govuk-link">whitehall</a>
    </li>
    <li>
      <ul>
            <li><a href="/repos/whitehall/access_controls.html" rel="noopener" class="govuk-link">Access controls for editions</a></li>
    <li><a href="/repos/whitehall/analytics.html" rel="noopener" class="govuk-link">Analytics</a></li>
    <li><a href="/repos/whitehall/assets.html" rel="noopener" class="govuk-link">assets</a></li>
    <li><a href="/repos/whitehall/auditing.html" rel="noopener" class="govuk-link">Whitehall Content Audit Trail</a></li>
    <li><a href="/repos/whitehall/browser_support.html" rel="noopener" class="govuk-link">Whitehall browser support</a></li>
    <li><a href="/repos/whitehall/configurable_document_types.html" rel="noopener" class="govuk-link">Configurable Document Types</a></li>
    <li><a href="/repos/whitehall/contacts_expansion.html" rel="noopener" class="govuk-link">How does Whitehall handle contact expansion in govspeak?</a></li>
    <li><a href="/repos/whitehall/css.html" rel="noopener" class="govuk-link">Whitehall CSS Styleguide</a></li>
    <li><a href="/repos/whitehall/edition_model.html" rel="noopener" class="govuk-link">Edition Model</a></li>
    <li><a href="/repos/whitehall/edition_workflow.html" rel="noopener" class="govuk-link">Edition Workflow</a></li>
    <li><a href="/repos/whitehall/email_delivery.html" rel="noopener" class="govuk-link">Email delivery</a></li>
    <li><a href="/repos/whitehall/feature_flags.html" rel="noopener" class="govuk-link">Feature Flags</a></li>
    <li><a href="/repos/whitehall/history_mode.html" rel="noopener" class="govuk-link">History Mode</a></li>
    <li><a href="/repos/whitehall/internationalisation_guide.html" rel="noopener" class="govuk-link">Internationalisation guide</a></li>
    <li><a href="/repos/whitehall/javascript.html" rel="noopener" class="govuk-link">Whitehall JavaScript</a></li>
    <li><a href="/repos/whitehall/link_checker_api_integration.html" rel="noopener" class="govuk-link">Link Checker API Integrations</a></li>
    <li><a href="/repos/whitehall/pushing_content_to_publishing_api.html" rel="noopener" class="govuk-link">Pushing content to Publishing API</a></li>
    <li><a href="/repos/whitehall/remove_access_limited.html" rel="noopener" class="govuk-link">Access limited</a></li>
    <li><a href="/repos/whitehall/search_indexing.html" rel="noopener" class="govuk-link">Search Indexing</a></li>
    <li><a href="/repos/whitehall/timestamps.html" rel="noopener" class="govuk-link">Timestamps</a></li>
    <li><a href="/repos/whitehall/tips_for_local_development.html" rel="noopener" class="govuk-link">Tips for working on Whitehall locally</a></li>
    <li><a href="/repos/whitehall/troubleshooting.html" rel="noopener" class="govuk-link">Whitehall troubleshooting</a></li>
    <li><a href="/repos/whitehall/view_components.html" rel="noopener" class="govuk-link">View Components</a></li>
    <li class="subdir__heading">adr</li>
    <ul class="subdir__menu">
          <li><a href="/repos/whitehall/adr/0001-add-view-components.html" rel="noopener" class="govuk-link">1. Add View Components</a></li>
    <li><a href="/repos/whitehall/adr/0002-new-asset-model.html" rel="noopener" class="govuk-link">2. New Asset Model</a></li>
    <li><a href="/repos/whitehall/adr/0003-worldwide-organisation-multi-part-content.html" rel="noopener" class="govuk-link">3. Using multi-part content for Worldwide Organisations</a></li>
    <li><a href="/repos/whitehall/adr/0004-content-object-store-added-with-a-rails-engine.html" rel="noopener" class="govuk-link">4. content-object-store-added-with-a-rails-engine</a></li>
    <li><a href="/repos/whitehall/adr/0005-use-json-schema-for-flexible-page-schemas.html" rel="noopener" class="govuk-link">5. Use JSON Schema for configurable document schemas</a></li>
    <li><a href="/repos/whitehall/adr/0006-config-driven-content-types.html" rel="noopener" class="govuk-link">6. Config driven content types</a></li>
    <li><a href="/repos/whitehall/adr/0007-use-rails-validation-for-configurable-documents.html" rel="noopener" class="govuk-link">7. Use Rails validation for configurable documents</a></li>
    <li><a href="/repos/whitehall/adr/0008-drop-json-schema-for-document-configuration.html" rel="noopener" class="govuk-link">8. Drop JSON schema for specifying document properties in favour of our own custom schema definition</a></li>

    </ul>
    <li class="subdir__heading">diagrams</li>
    <ul class="subdir__menu">
          <li><a href="/repos/whitehall/diagrams/README.html" rel="noopener" class="govuk-link">PlantUML Diagrams</a></li>

    </ul>
    <li class="subdir__heading">misc</li>
    <ul class="subdir__menu">
          <li><a href="/repos/whitehall/misc/guidelines-for-translators.html" rel="noopener" class="govuk-link">guidelines-for-translators</a></li>

    </ul>

      </ul>
    </li>
  </ul>

              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Apps",
        "@id": "http://www.dev.gov.uk/apps.html"
      }
    },
    {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "name": "whitehall",
        "@id": "http://www.dev.gov.uk/repos/whitehall.html"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/apps.html">Apps</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;3&quot;,&quot;index_total&quot;:&quot;3&quot;}" class="govuk-breadcrumbs__link" href="/repos/whitehall.html">whitehall</a>
        </li>
  </ol>
</nav>
  <div class="govuk-!-font-size-16 govuk-!-margin-top-6">

  Last updated: <a href="https://github.com/alphagov/whitehall/commit/1e8b5acb9045ef34dc04c623b84bf2ee2551790a">18 Aug 2025</a>
</div>

  <h1 class="page-title">whitehall: 6. Config driven content types</h1>

  
<h2 id="status">Status</h2>
<p>Accepted</p>
<h2 id="context">Context</h2>
<h2 id="terminology">Terminology</h2>
<ul>
<li>“Content type” (also ‘format’): publisher/end-user facing concept (in publishing app UI, guidance, and on GOV.UK).</li>
<li>“Document type”: largely synonymous with the above, but used by developers, often used alongside a “schema name”. The former is a subset of the latter. References to both concepts are hard-wired into lots of areas of code across GOV.UK, so are difficult to change. Examples of document types and schema names:
<ul>
<li>Document type: “press_release”, schema name: “news_article”.</li>
<li>Document type: “cma_case”, schema name: “specialist_document”.</li>
</ul>
</li>
<li>“Content type” is the <a href="https://docs.google.com/presentation/d/1wbEU8n_AvEFyi230ahUR_AI51NVbU-rex3Po68aTMO4/edit?slide=id.g1bd648f90ee_0_8#slide=id.g1bd648f90ee_0_8">preferred naming</a> according to our publishers survey.</li>
</ul>
<h2 id="grouped-content-types-by-purpose">Grouped content types by purpose</h2>
<p>The <a href="https://docs.google.com/presentation/d/1wbEU8n_AvEFyi230ahUR_AI51NVbU-rex3Po68aTMO4/edit?slide=id.g18f26f180b0_0_4">Content Types Discovery</a> work established a classification of content types by purpose. The relevant ones for Whitehall are as follows:</p>
<ul>
<li>Standard – simple, no phasing/chapters/routing (e.g. news article, guidance)</li>
<li>Multi-part – connected chapters/sequences (e.g. manuals)</li>
<li>Navigation – organisational or navigational pages</li>
<li>Phased – changes over time (e.g. consultations, statistics)</li>
</ul>
<p>Looking at some existing content types in Whitehall: “News Story”, “World News Story”, “Press Release” and “Government Response” are all subtypes of “News Article”. If we are to follow the recommendations in the discovery, these would all be consolidated under the “Standard” content type. The proposals in this ADR don’t commit us to going all the way on that, but do enable us to in future if we wish.</p>
<h2 id="current-situation-in-whitehall">Current situation in Whitehall</h2>
<p>At present, each content type has its own model, controller, and custom suites of tests (unit, integration, request and feature tests). This has led to significant configuration drift over time, where similar types diverge subtly without clear reasoning.</p>
<p>Indeed, even understanding the total number of content types and their behaviours requires deep code inspection, because:</p>
<ul>
<li>Behaviours are not encapsulated within models</li>
<li>Layers of inheritance, mixed-in modules, and overridden methods obscure the picture</li>
<li>Behaviour is often defined indirectly (e.g. via pub/sub callbacks)</li>
</ul>
<p>This complexity makes reasoning, maintenance, and iteration difficult. Even adding a basic new content type requires writing a lot of boilerplate code, and supporting more substantial emerging user needs (such as multi-platform support or more flexible page templates) would be a significant architectural challenge that would introduce a lot of additional complexity onto an already tech-debt-laden system.</p>
<h2 id="decision">Decision</h2>
<p>The config-driven architecture (first touched on in <a href="https://github.com/alphagov/whitehall/blob/main/docs/adr/0005-use-json-schema-for-flexible-page-schemas.md">ADR 005</a>) will be the primary means in which we represent all content types in Whitehall. We intend to migrate all existing content types to this new architecture, starting with the migration of News Articles. The approach has already been <a href="https://github.com/alphagov/whitehall/pull/10425">spiked in #10425</a>.</p>
<h3 id="key-elements">Key elements</h3>
<h4 id="1-content-type-configurations">1. Content Type Configurations</h4>
<p>We will begin with a one-to-one mapping of content subtype to JSON file. For example, a news_story.json config file for News Story content types. This could later be consolidated into a generic ‘standard document’ config file if we wish.</p>
<p>We expect to have to retain the idea of News Stories, Press Releases and so on being subtypes of “News Article”. This could be inferred by folder placement (e.g. news_article/news_story.json) or config (e.g. "ancestor": "news_article"). This ADR doesn’t prescribe which approach to take, but we should be consistent in how we apply it to other subtypes going forward.</p>
<p>Each config file will define allowed behaviours (e.g. via booleans such as allows_file_attachments: true) as well as field definitions (just a govspeak body for news articles, but additional fields for other types, e.g. ‘delivered on date / time’ for Speech). These fields will be stored as a hash in the existing edition_translations.flexible_page_content JSONB column.</p>
<h4 id="2-core-model">2. Core Model</h4>
<p>For now, all config-driven content types will use the same base model: ConfigDrivenContentType (which will inherit from Edition). In time, we may introduce an intermediary layer of inheritance, e.g. StandardContentType, if there is sufficient difference in core behaviour that we need different base models for the config-driven content types.</p>
<p>This model will include all allowable behaviour modules (attachments, translations, etc) and use the override methods defined in each module (informed by an equivalent boolean in the config file) to enable or disable the behaviour. For example, allows_file_attachments? would be overridden to return true or false depending on a boolean in the config such as allows_file_attachments: true.</p>
<p>We therefore would continue to persist associations using the existing architecture for the time being (via table-level properties on the Edition table), rather than in the new JSON field.</p>
<h4 id="3-principles">3. Principles</h4>
<p>We will abide by the following principles whilst developing this config-driven architecture:</p>
<ul>
<li>Configuration over convention
<ul>
<li>Behaviour is discoverable from a single JSON file, not scattered across code. Every property will be explicitly defined in every JSON file: nothing inferred.</li>
<li>The “<a href="https://docs.google.com/document/d/1ma5gzJU8EUl3Yo6J6z3XzkEdpqUVLPLPEoSPff9ZduE/edit?tab=t.0">Proposal to simplify translations in Whitehall</a>” document outlines a real world problem with the current implementation: there are several formats that don’t explicitly opt out of ‘translations’ or ‘foreign language only’ features: they just don’t override the default value (false) for them. If a format hasn't been opted in, it's not clear whether that was deliberate, or simply forgotten. Explicit configuration provides immediate clarity and a clear commit history audit trail.</li>
</ul>
</li>
<li>No concrete references to specific content types
<ul>
<li>Despite the multiple layers of inheritance and the composability of modules alongside allow_x? override methods, Whitehall is riddled with <a href="https://github.com/alphagov/whitehall/blob/06da2ff2029df4ef74ded21e50adf0f47a1a1e4e/app/components/admin/edition_images/lead_image_component.rb#L46-L52">examples</a> of concrete references to specific content types in places quite far away from the model itself. We aim to remove all such occurrences through migrating to the config-driven approach.</li>
</ul>
</li>
<li>High quality, maintainable test coverage, without needless repetition
<ul>
<li>We want to avoid writing feature tests, integration tests and the like, for each individual content type. Instead, we want to:
<ul>
<li>Test each module of behaviour in isolation, and that opting in via the config file sets the allows_x? override method as it should.</li>
<li>Have schema validation that ensures each config file is valid (i.e. has all the properties it ought to, and no unknown properties).</li>
<li>Have a basic double-ledger test for each content type, whereby we write a test that checks the values for important properties in the config (e.g. a test that news_story.json has a property allows_file_attachments: true, if that’s deemed to be a behaviour too important not to enforce with a test).</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-backwards-compatibility">4. Backwards compatibility</h4>
<p>We need to be sending exactly the same payload to Publishing API (and in turn, Content Store and the frontend rendering apps) as we have been doing in the lead up to config-driven document types. This is to enable us to work at our own pace and gain the value of the refactor more quickly.</p>
<p>We do, however, need to be able to easily change the payload in response to changing business requirements such as flexible pages and multi-platform support. Without prescribing the exact detail of such a system, this ADR suggests that config-driven content types could have a shared generic presenter, called at the point of publishing a document’s payload to Publishing API.</p>
<p>In that hypothetical system, by default, we would be sending a genericised or ‘flexible’ payload to Publishing API, and the applications downstream of Publishing API may not know how to render such a payload. We could then build a ‘legacy presenter’ to take a generic/flexible payload and map it to the existing (‘legacy’) payload structure, so that as far as Publishing API, Content Store and Frontend are concerned, nothing has changed. We could maintain this low-cost backwards compatibility solution for as long as necessary, only omitting the call to the legacy presenter when ready.</p>
<h4 id="5-forwards-compatibility">5. Forwards compatibility</h4>
<p>When schema changes are required to the content types, we need to make sure that we can release those migrations safely without breaking existing content.</p>
<p>It is outside of the scope of this ADR to propose a full plan for how these schema migrations will be managed, but generally we need to be mindful of the fact that removing an attribute from the schema, or changing its “key”, will make any existing content which has data stored for any such attributes incompatible with the schema. Similarly, adding a new attribute with the “required” property would make existing content invalid.</p>
<p>We therefore need to apply the same rigour that we would with normal database migrations to our schema migrations, but we won’t have MySQL’s built-in integrity checks to help us. We should consider building some tooling to support these migrations, such as:</p>
<ol>
<li>a tool that parses all of the schemas during CI and prevents/warns about dangerous changes</li>
<li>a bulk update tool that can help us set or change data for an attribute across multiple content items during a migration</li>
</ol>
<h2 id="consequences">Consequences</h2>
<h2 id="benefits">Benefits</h2>
<ul>
<li>Clarity: behaviour is declared in one place per content type.</li>
<li>Consistency: reduces accidental divergence between similar types.</li>
<li>Maintainability: easier to add, merge, or retire types.</li>
<li>Composability: new types can easily be created from a selection of existing behaviours</li>
<li>Scalability: enables more flexibility in Whitehall’s output, to accommodate multi platform requirements, personalisation, and publisher-led layouts.</li>
</ul>
<h2 id="risks-trade-offs">Risks / Trade-offs</h2>
<ul>
<li>Still tied to legacy Edition table and architecture for now.</li>
<li>Requires discipline to resist adding bespoke code as we migrate ever more specialised content types.</li>
<li>Unknowns around the performance of querying JSON fields. (Will be stress tested early in the migration plan below).</li>
<li>Unknowns around how we would accommodate adding, renaming, reordering or removing ‘blocks’/’fields’ in future.
<ul>
<li>Assumption: we would handle this very much like we would if we were adding, renaming or removing top-level fields on legacy content types. I.e. a database migration, perhaps with additional tooling - see <a href="#5-forwards-compatibility">Forwards Compatibility</a>.</li>
</ul>
</li>
</ul>
<h2 id="migration-plan-phase-1-news-articles">Migration Plan (Phase 1: News Articles)</h2>
<ol>
<li>Implement ConfigDrivenContentType base class and JSON config loader.</li>
<li>Create configs for all news article subtypes.</li>
<li>Import and opt into all the relevant behaviour modules.</li>
<li>Support wider functionality such as search, document collections, bulk republishing.</li>
<li>Verify behaviour parity via unit and double-ledger tests.</li>
<li>Map block/field data to current Publishing API payload via LegacyPresenter.</li>
<li>Migrate legacy News Articles from Content Publisher into Whitehall, into this new format. (Double benefit of unblocking Content Publisher retirement and giving Whitehall enough data to stress-test the new config-driven architecture).</li>
<li>Redirect the news article creation workflow to silently switch the publisher over to the config-driven architecture approach.</li>
<li>Migrate Whitehall’s existing/legacy news articles</li>
<li>Review and write up a plan for rolling out to the other standard content types.</li>
</ol>

  <script>
    /*
      Manually trigger the styling of the 'current page' in the sidebar,
      as it does not happen automatically because we are still technically
      in single page mode.
    */
    (function () {
        'use strict'
        /*
          Cannot use `$(document).ready` on next line as jQuery has not loaded
          yet. But we can use jQuery in the callback.
        */
        window.addEventListener('load', function () {
            try {
                new GOVUK.Modules.InPageNavigation().start($("html"));
            }
            catch (error) {
                /* Fail without causing other JS in the page to break */
                console.log("Error calling GOVUK's InPageNavigation module", error);
            }
        })
    }());
</script>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/whitehall/blob/main/docs/adr/0006-config-driven-content-types.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Frepos%2Fwhitehall%2Fadr%2F0006-config-driven-content-types.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
