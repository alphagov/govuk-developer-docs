---
layout: gem_layout
title: GDS API Adapters
permalink: gds-api-adapters.html
---
 <!-- This file was automatically generated. DO NOT EDIT DIRECTLY. --> <div id="content">
      
      <div id="readme">
  
</div>














<h2>Class: GdsApi::Rummager
  
  
  
</h2>




<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_document-instance_method" title="#add_document (instance method)">- (GdsApi::Response) <strong>add_document</strong>(type, id, document) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Add a document to the search index.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#advanced_search-instance_method" title="#advanced_search (instance method)">- (Object) <strong>advanced_search</strong>(args) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class="inline">
<p>Only in use by Whitehall. Use the <code>#search</code> method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_content%21-instance_method" title="#delete_content! (instance method)">- (Object) <strong>delete_content!</strong>(base_path) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Delete a content-document from the index by base path.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_document-instance_method" title="#delete_document (instance method)">- (Object) <strong>delete_document</strong>(type, id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Delete a non-content document from the search index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_content%21-instance_method" title="#get_content! (instance method)">- (Object) <strong>get_content!</strong>(base_path) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Retrieve a content-document from the index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">- (Object) <strong>search</strong>(args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Perform a search.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_document-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>add_document</strong>(type, id, document) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Add a document to the search index.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">type</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The rummager/elasticsearch document type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The rummager/elasticsearch id. Typically the same as the <code>link</code>
field, but this is not strictly enforced.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">document</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The document to add. Must match the rummager schema matchin the
<code>type</code> parameter and contain a <code>link</code> field.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>A status code of 202 indicates the document has been successfully queued.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/rummager/blob/master/docs/documents.md" target="_parent" title="https://github.com/alphagov/rummager/blob/master/docs/documents.md">https://github.com/alphagov/rummager/blob/master/docs/documents.md</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="advanced_search-instance_method">
  
    - (<tt>Object</tt>) <strong>advanced_search</strong>(args) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    <div class="note deprecated">
<strong>Deprecated.</strong> <div class="inline">
<p>Only in use by Whitehall. Use the <code>#search</code> method.</p>
</div>
</div>

<p>Advanced search.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_content!-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_content!</strong>(base_path) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Delete a content-document from the index by base path.</p>

<p>Content documents are pages on GOV.UK that have a base path and are
returned in searches. This excludes best bets, recommended-links, and
contacts, which may be deleted with <code>delete_document</code>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">base_path</span>
      
      
        <span class="type"></span>
      
      
      
        —
        <div class="inline">
<p>Base path of the page on GOV.UK.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/rummager/blob/master/docs/content-api.md" target="_parent" title="https://github.com/alphagov/rummager/blob/master/docs/content-api.md">https://github.com/alphagov/rummager/blob/master/docs/content-api.md</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_document-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_document</strong>(type, id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Delete a non-content document from the search index.</p>

<p>For example, best bets, recommended links, or contacts.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">type</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The rummager/elasticsearch document type.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The rummager/elasticsearch id. Typically the same as the <code>link</code>
field.</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_content!-instance_method">
  
    - (<tt>Object</tt>) <strong>get_content!</strong>(base_path) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Retrieve a content-document from the index.</p>

<p>Content documents are pages on GOV.UK that have a base path and are
returned in searches. This excludes best bets, recommended-links, and
contacts.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">base_path</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Base path of the page on GOV.UK.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/rummager/blob/master/docs/content-api.md" target="_parent" title="https://github.com/alphagov/rummager/blob/master/docs/content-api.md">https://github.com/alphagov/rummager/blob/master/docs/content-api.md</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search-instance_method">
  
    - (<tt>Object</tt>) <strong>search</strong>(args) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Perform a search.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">args</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>A valid search query. See Rummager documentation for options.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/rummager/blob/master/docs/search-api.md" target="_parent" title="https://github.com/alphagov/rummager/blob/master/docs/search-api.md">https://github.com/alphagov/rummager/blob/master/docs/search-api.md</a></li>
    
  </ul>

</div>
</div>
    
  </div>


<h2>Class: GdsApi::SupportApi
  
  
  
</h2>




<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#anonymous_feedback-instance_method" title="#anonymous_feedback (instance method)">- (Object) <strong>anonymous_feedback</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_anonymous_long_form_contact-instance_method" title="#create_anonymous_long_form_contact (instance method)">- (Object) <strong>create_anonymous_long_form_contact</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_feedback_export_request-instance_method" title="#create_feedback_export_request (instance method)">- (Object) <strong>create_feedback_export_request</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_global_export_request-instance_method" title="#create_global_export_request (instance method)">- (Object) <strong>create_global_export_request</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_page_improvement-instance_method" title="#create_page_improvement (instance method)">- (GdsApi::Response) <strong>create_page_improvement</strong>(params) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Create a Page Improvement.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_problem_report-instance_method" title="#create_problem_report (instance method)">- (Object) <strong>create_problem_report</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_service_feedback-instance_method" title="#create_service_feedback (instance method)">- (Object) <strong>create_service_feedback</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#feedback_export_request-instance_method" title="#feedback_export_request (instance method)">- (Object) <strong>feedback_export_request</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mark_reviewed_for_spam-instance_method" title="#mark_reviewed_for_spam (instance method)">- (Object) <strong>mark_reviewed_for_spam</strong>(request_details) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Update multiple problem reports as reviewed for spam.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organisation-instance_method" title="#organisation (instance method)">- (Object) <strong>organisation</strong>(organisation_slug) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organisation_summary-instance_method" title="#organisation_summary (instance method)">- (Object) <strong>organisation_summary</strong>(organisation_slug, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organisations_list-instance_method" title="#organisations_list (instance method)">- (Object) <strong>organisations_list</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#problem_report_daily_totals_for-instance_method" title="#problem_report_daily_totals_for (instance method)">- (Object) <strong>problem_report_daily_totals_for</strong>(date) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#problem_reports-instance_method" title="#problem_reports (instance method)">- (Object) <strong>problem_reports</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Fetch a list of problem reports.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="anonymous_feedback-instance_method">
  
    - (<tt>Object</tt>) <strong>anonymous_feedback</strong>(options = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_anonymous_long_form_contact-instance_method">
  
    - (<tt>Object</tt>) <strong>create_anonymous_long_form_contact</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_feedback_export_request-instance_method">
  
    - (<tt>Object</tt>) <strong>create_feedback_export_request</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_global_export_request-instance_method">
  
    - (<tt>Object</tt>) <strong>create_global_export_request</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_page_improvement-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>create_page_improvement</strong>(params) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create a Page Improvement</p>

<p>Makes a <code>POST</code> request to the support api to create a Page
Improvement.</p>

<p>)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>support_api.create_page_improvement(
  description: 'The title is wrong',
  path: 'http://gov.uk/service-manual/agile'</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">params</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Any attributes that relate to a Page Improvement.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The wrapped http response from the api. Responds to the following: :status
a string that is either 'success' or 'error'</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_problem_report-instance_method">
  
    - (<tt>Object</tt>) <strong>create_problem_report</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_service_feedback-instance_method">
  
    - (<tt>Object</tt>) <strong>create_service_feedback</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="feedback_export_request-instance_method">
  
    - (<tt>Object</tt>) <strong>feedback_export_request</strong>(id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mark_reviewed_for_spam-instance_method">
  
    - (<tt>Object</tt>) <strong>mark_reviewed_for_spam</strong>(request_details) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Update multiple problem reports as reviewed for spam.</p>

<p>Makes a <code>PUT</code> request.</p>

<h2 id="label-40example">@example</h2>

<p>support_api.mark_reviewed_for_spam({ “1” =&gt; false, “2” =&gt; true
}).to_h</p>

<h2 id="label-3D-3E+-7B+-22success-22+-3D-3E+true+-7D+-28status-3A+200-29">=&gt; { “success” =&gt; true } (status: 200)</h2>

<h2 id="label-40example">@example</h2>

<p>Where there is no problem report with ID of 1.</p>

<p>support_api.mark_reviewed_for_spam({ “1” =&gt; true }).to_h</p>

<h2 id="label-3D-3E+-7B+-22success-22+-3D-3E+false-7D+-28status-3A+400-29">=&gt; { “success” =&gt; false} (status: 400)</h2>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">request_details</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Containing keys that match IDs of Problem Reports mapped to a boolean value
- true if that report is to be marked as spam, or false otherwise.</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organisation-instance_method">
  
    - (<tt>Object</tt>) <strong>organisation</strong>(organisation_slug) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organisation_summary-instance_method">
  
    - (<tt>Object</tt>) <strong>organisation_summary</strong>(organisation_slug, options = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organisations_list-instance_method">
  
    - (<tt>Object</tt>) <strong>organisations_list</strong> 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="problem_report_daily_totals_for-instance_method">
  
    - (<tt>Object</tt>) <strong>problem_report_daily_totals_for</strong>(date) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="problem_reports-instance_method">
  
    - (<tt>Object</tt>) <strong>problem_reports</strong>(options = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Fetch a list of problem reports.</p>

<p>Makes a <code>GET</code> request.</p>

<p>If no options are supplied, the first page of unreviewed feedback is
returned.</p>

<p>The results are ordered date descending.</p>

<h2 id="label-3D-3D-3D-3D+Options+-5BHash-5D">==== Options [<code>Hash</code>]</h2>
<ul>
<li>
<p><code>:from_date</code> - from date for list of reports.</p>
</li>
<li>
<p><code>:to_date</code> - to date for list of reports.</p>
</li>
<li>
<p><code>:page</code> - page number for reports.</p>
</li>
<li>
<p><code>:include_reviewed</code> - if true, includes reviewed reports in the
list.</p>
</li>
</ul>

<h2 id="label-40example">@example</h2>

<p>support_api.problem_reports({ from_date: '2016-12-12', to_date:
'2016-12-13', page: 1, include_reviewed: true }).to_h</p>

<p>#=&gt; {  results: [ { id: 1, type: “problem-report”, what_wrong: “Yeti”,
what_doing: “Skiing”, url: “<a href="http://www.dev.gov.uk/skiing">www.dev.gov.uk/skiing</a>”, referrer:
“<a href="https://www.gov.uk/browse">www.gov.uk/browse</a>”, user_agent:
“Safari”, path: “/skiing”, marked_as_spam: false, reviewed: true,
created_at: “2015-01-01T16:00:00.000Z” }, … ]  total_count: 1000, 
current_page: 1,  pages: 50,  page_size: 50  }</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
  </div>


<h2>Class: GdsApi::AssetManager
  
  
  
</h2>




<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#asset-instance_method" title="#asset (instance method)">- (GdsApi::Response<sup>?</sup>) <strong>asset</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Fetches an asset given the id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_asset-instance_method" title="#create_asset (instance method)">- (GdsApi::Response) <strong>create_asset</strong>(asset) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Creates an asset given a hash with one <code>file</code> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_asset-instance_method" title="#delete_asset (instance method)">- (GdsApi::Response) <strong>delete_asset</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Deletes an asset given an id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_asset-instance_method" title="#restore_asset (instance method)">- (GdsApi::Response) <strong>restore_asset</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Restores an asset given an id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_asset-instance_method" title="#update_asset (instance method)">- (GdsApi::Response) <strong>update_asset</strong>(id, asset) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Updates an asset given a hash with one <code>file</code> attribute.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="asset-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt><sup>?</sup>) <strong>asset</strong>(id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Fetches an asset given the id</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The asset identifier (a UUID).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>, <tt>nil</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>A response object containing the parsed JSON response. If the asset cannot
be found, <code>nil</code> wil be returned.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_asset-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>create_asset</strong>(asset) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates an asset given a hash with one <code>file</code> attribute</p>

<p>Makes a <code>POST</code> request to the asset manager api to create an
asset.</p>

<p>The asset must be provided as a <code>Hash</code> with a single
<code>file</code> attribute that behaves like a <code>File</code> object.
The <code>content-type</code> that the asset manager will subsequently
serve will be based <em>only</em> on the file's extension (derived from
<code>#path</code>). If you supply a <code>content-type</code> via, for
example <code>ActionDispatch::Http::UploadedFile</code> or another
multipart wrapper, it will be ignored.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"></p>
<div class="inline">
<p>Upload a file from disk</p>
</div>
      
      <pre class="example code"><code><span class="id identifier rubyid_response">response</span> <span class="op">=</span> <span class="id identifier rubyid_asset_manager">asset_manager</span><span class="period">.</span><span class="id identifier rubyid_create_asset">create_asset</span><span class="lparen">(</span><span class="label">file:</span> <span class="const">File</span><span class="period">.</span><span class="id identifier rubyid_new">new</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">image.jpg</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">r</span><span class="tstring_end">'</span></span><span class="rparen">)</span><span class="rparen">)</span>
<span class="id identifier rubyid_response">response</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">id</span><span class="tstring_end">'</span></span><span class="rbracket">]</span>           <span class="comment">#=&gt; "http://asset-manager.dev.gov.uk/assets/576bbc52759b74196b000012"
</span><span class="id identifier rubyid_response">response</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">content_type</span><span class="tstring_end">'</span></span><span class="rbracket">]</span> <span class="comment">#=&gt; "image/jpeg"</span></code></pre>
    
      
        <p class="example_title"></p>
<div class="inline">
<p>Upload a file from a Rails param, (typically a multipart wrapper)</p>
</div>
      
      <pre class="example code"><code><span class="id identifier rubyid_params">params</span><span class="lbracket">[</span><span class="symbol">:file</span><span class="rbracket">]</span> <span class="comment">#=&gt; #&lt;ActionDispatch::Http::UploadedFile:0x007fc60b43c5c8
</span>                  <span class="comment"># @content_type="application/foofle",
</span>                  <span class="comment"># @original_filename="cma_case_image.jpg",
</span>                  <span class="comment"># @tempfile="spec/support/images/cma_case_image.jpg"&gt;
</span>
<span class="comment"># Though we sent a file with a +content_type+ of 'application/foofle',
</span><span class="comment"># this was ignored
</span><span class="id identifier rubyid_response">response</span> <span class="op">=</span> <span class="id identifier rubyid_asset_manager">asset_manager</span><span class="period">.</span><span class="id identifier rubyid_create_asset">create_asset</span><span class="lparen">(</span><span class="label">file:</span> <span class="id identifier rubyid_params">params</span><span class="lbracket">[</span><span class="symbol">:file</span><span class="rbracket">]</span><span class="rparen">)</span>
<span class="id identifier rubyid_response">response</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">content_type</span><span class="tstring_end">'</span></span><span class="rbracket">]</span> <span class="comment">#=&gt; "image/jpeg"</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">asset</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The attributes for the asset to send to the api. Must contain
<code>file</code>, which behaves like a <code>File</code>. All other
attributes will be ignored.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The wrapped http response from the api. Behaves both as a <code>Hash</code>
and an <code>OpenStruct</code>, and responds to the following:  :id the URL
of the asset  :name the filename of the asset that will be served 
:content_type the content_type of the asset  :file_url the URL from which
the asset will be served when it has  passed a virus scan  :state One of
'unscanned', 'clean', or 'infected'. Unless the
state is  'clean' the asset at the :file_url will 404</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_asset-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>delete_asset</strong>(id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes an asset given an id</p>

<p>Makes a <code>DELETE</code> request to the asset manager api to delete an
asset.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"></p>
<div class="inline">
<p>Delete a file from disk</p>
</div>
      
      <pre class="example code"><code><span class="id identifier rubyid_uuid">uuid</span> <span class="op">=</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">594602dd-75b3-4e6f-b5d1-cacf8c4d4164</span><span class="tstring_end">'</span></span>
<span class="id identifier rubyid_asset_manager">asset_manager</span><span class="period">.</span><span class="id identifier rubyid_delete_asset">delete_asset</span><span class="lparen">(</span><span class="id identifier rubyid_uuid">uuid</span><span class="rparen">)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The asset identifier (a UUID).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The wrapped http response from the api. Behaves both as a <code>Hash</code>
and an <code>OpenStruct</code>, and responds to the following:  :id the URL
of the asset  :name the filename of the asset that will be served 
:content_type the content_type of the asset  :file_url the URL from which
the asset will be served when it has  passed a virus scan  :state One of
'unscanned', 'clean', or 'infected'. Unless the
state is  'clean' the asset at the :file_url will 404</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="restore_asset-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>restore_asset</strong>(id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Restores an asset given an id</p>

<p>Makes a <code>POST</code> request to the asset manager api to restore an
asset.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"></p>
<div class="inline">
<p>Restore a deleted file</p>
</div>
      
      <pre class="example code"><code><span class="id identifier rubyid_uuid">uuid</span> <span class="op">=</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">594602dd-75b3-4e6f-b5d1-cacf8c4d4164</span><span class="tstring_end">'</span></span>
<span class="id identifier rubyid_asset_manager">asset_manager</span><span class="period">.</span><span class="id identifier rubyid_restore_asset">restore_asset</span><span class="lparen">(</span><span class="id identifier rubyid_uuid">uuid</span><span class="rparen">)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The asset identifier (a UUID).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The wrapped http response from the api. Behaves both as a <code>Hash</code>
and an <code>OpenStruct</code>, and responds to the following:  :id the URL
of the asset  :name the filename of the asset that will be served 
:content_type the content_type of the asset  :file_url the URL from which
the asset will be served when it has  passed a virus scan  :state One of
'unscanned', 'clean', or 'infected'. Unless the
state is  'clean' the asset at the :file_url will 404</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_asset-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>update_asset</strong>(id, asset) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Updates an asset given a hash with one <code>file</code> attribute</p>

<p>Makes a <code>PUT</code> request to the asset manager api to update an
asset.</p>

<p>The asset must be provided as a <code>Hash</code> with a single
<code>file</code> attribute that behaves like a <code>File</code> object.
The <code>content-type</code> that the asset manager will subsequently
serve will be based <em>only</em> on the file's extension (derived from
<code>#path</code>). If you supply a <code>content-type</code> via, for
example <code>ActionDispatch::Http::UploadedFile</code> or another
multipart wrapper, it will be ignored.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"></p>
<div class="inline">
<p>Update a file from disk</p>
</div>
      
      <pre class="example code"><code><span class="id identifier rubyid_uuid">uuid</span> <span class="op">=</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">594602dd-75b3-4e6f-b5d1-cacf8c4d4164</span><span class="tstring_end">'</span></span>
<span class="id identifier rubyid_asset_manager">asset_manager</span><span class="period">.</span><span class="id identifier rubyid_update_asset">update_asset</span><span class="lparen">(</span><span class="id identifier rubyid_uuid">uuid</span><span class="comma">,</span> <span class="label">file:</span> <span class="const">File</span><span class="period">.</span><span class="id identifier rubyid_new">new</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">image.jpg</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">r</span><span class="tstring_end">'</span></span><span class="rparen">)</span><span class="rparen">)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The asset identifier (a UUID).</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">asset</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The attributes for the asset to send to the api. Must contain
<code>file</code>, which behaves like a <code>File</code>. All other
attributes will be ignored.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>The wrapped http response from the api. Behaves both as a <code>Hash</code>
and an <code>OpenStruct</code>, and responds to the following:  :id the URL
of the asset  :name the filename of the asset that will be served 
:content_type the content_type of the asset  :file_url the URL from which
the asset will be served when it has  passed a virus scan  :state One of
'unscanned', 'clean', or 'infected'. Unless the
state is  'clean' the asset at the :file_url will 404</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPErrorResponse</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>if the request returns an error</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>


<h2>Class: GdsApi::EmailAlertApi
  
  
  
</h2>




<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Adapter for the Email Alert API</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/email-alert-api" target="_parent" title="https://github.com/alphagov/email-alert-api">https://github.com/alphagov/email-alert-api</a></li>
    
  </ul>

</div>






  
    <h2>
      Instance Method Summary
      
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_or_create_subscriber_list-instance_method" title="#find_or_create_subscriber_list (instance method)">- (Object) <strong>find_or_create_subscriber_list</strong>(attributes) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get or Post subscriber list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notification-instance_method" title="#notification (instance method)">- (Hash) <strong>notification</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get notification.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notifications-instance_method" title="#notifications (instance method)">- (Hash) <strong>notifications</strong>(start_at = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get notifications.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_alert-instance_method" title="#send_alert (instance method)">- (Object) <strong>send_alert</strong>(publication) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Post notification.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="find_or_create_subscriber_list-instance_method">
  
    - (<tt>Object</tt>) <strong>find_or_create_subscriber_list</strong>(attributes) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get or Post subscriber list</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">attributes</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>document_type, links, tags used to search existing subscriber lists</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notification-instance_method">
  
    - (<tt>Hash</tt>) <strong>notification</strong>(id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get notification</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>GovDelivery bulletin id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>notification</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notifications-instance_method">
  
    - (<tt>Hash</tt>) <strong>notifications</strong>(start_at = nil) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get notifications</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">start_at</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        —
        <div class="inline">
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>start_at</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">Optional</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>GovDelivery bulletin id to page back through notifications</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>notifications</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_alert-instance_method">
  
    - (<tt>Object</tt>) <strong>send_alert</strong>(publication) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Post notification</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">publication</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Valid publication attributes</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
  </div>


<h2>Class: GdsApi::PublishingApiV2
  
  
  
</h2>




<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Adapter for the Publishing API.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api" target="_parent" title="https://github.com/alphagov/publishing-api">https://github.com/alphagov/publishing-api</a></li>
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/publishing-application-examples.md" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/publishing-application-examples.md">https://github.com/alphagov/publishing-api/blob/master/doc/publishing-application-examples.md</a></li>
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/model.md" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/model.md">https://github.com/alphagov/publishing-api/blob/master/doc/model.md</a></li>
    
  </ul>

</div>






  
    <h2>
      Instance Method Summary
      
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discard_draft-instance_method" title="#discard_draft (instance method)">- (Object) <strong>discard_draft</strong>(content_id, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Discard a draft.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_content-instance_method" title="#get_content (instance method)">- (GdsApi::Response) <strong>get_content</strong>(content_id, params = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Return a content item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_content%21-instance_method" title="#get_content! (instance method)">- (GdsApi::Response) <strong>get_content!</strong>(content_id, params = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Return a content item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_content_items-instance_method" title="#get_content_items (instance method)">- (Object) <strong>get_content_items</strong>(params) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get a list of content items from the Publishing API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_expanded_links-instance_method" title="#get_expanded_links (instance method)">- (Object) <strong>get_expanded_links</strong>(content_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get expanded links.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_linkables-instance_method" title="#get_linkables (instance method)">- (Object) <strong>get_linkables</strong>(document_type: nil, format: nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>FIXME: Add documentation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_linked_items-instance_method" title="#get_linked_items (instance method)">- (Object) <strong>get_linked_items</strong>(content_id, params = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>FIXME: Add documentation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_links-instance_method" title="#get_links (instance method)">- (GdsApi::Response) <strong>get_links</strong>(content_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Get the link set for the given content_id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_content_id-instance_method" title="#lookup_content_id (instance method)">- (UUID) <strong>lookup_content_id</strong>(base_path:) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Find the content_id for a base_path.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_content_ids-instance_method" title="#lookup_content_ids (instance method)">- (Hash) <strong>lookup_content_ids</strong>(base_paths:) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Find the content_ids for a list of base_paths.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#patch_links-instance_method" title="#patch_links (instance method)">- (Object) <strong>patch_links</strong>(content_id, params) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Patch the links of a content item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#publish-instance_method" title="#publish (instance method)">- (Object) <strong>publish</strong>(content_id, update_type, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Publish a content item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_content-instance_method" title="#put_content (instance method)">- (Object) <strong>put_content</strong>(content_id, payload) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Put a content item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unpublish-instance_method" title="#unpublish (instance method)">- (Object) <strong>unpublish</strong>(content_id, type:, explanation: nil, alternative_path: nil, discard_drafts: false, allow_draft: false, previous_version: nil, locale: nil, unpublished_at: nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>Unpublish a content item.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="discard_draft-instance_method">
  
    - (<tt>Object</tt>) <strong>discard_draft</strong>(content_id, options = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Discard a draft</p>

<p>Deletes the draft content item.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">options</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">locale</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>The language, defaults to 'en' in publishing-api.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">previous_version</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>used to ensure the request is discarding the latest lock version of the
draft</p>
</div>
          
        </li>
      
    </ul>
  


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_iddiscard-draft" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_iddiscard-draft">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_iddiscard-draft</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_content-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>get_content</strong>(content_id, params = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return a content item</p>

<p>Returns nil if the content item doesn't exist.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">params</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>params</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">locale</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>The language, defaults to 'en' in publishing-api.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>a content item</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_content!-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>get_content!</strong>(content_id, params = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return a content item</p>

<p>Raises exception if the item doesn't exist.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">params</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>params</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">locale</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>The language, defaults to 'en' in publishing-api.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>a content item</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">HTTPNotFound</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>when the content item is not found</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2contentcontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_content_items-instance_method">
  
    - (<tt>Object</tt>) <strong>get_content_items</strong>(params) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get a list of content items from the Publishing API.</p>

<p>The only required key in the params hash is <code>document_type</code>.
These will be used to filter down the content items being returned by the
API. Other allowed options can be seen from the link below.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
<span class="id identifier rubyid_publishing_api">publishing_api</span><span class="period">.</span><span class="id identifier rubyid_get_content_items">get_content_items</span><span class="lparen">(</span>
  <span class="label">document_type:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">taxon</span><span class="tstring_end">'</span></span><span class="comma">,</span>
  <span class="label">q:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">Driving</span><span class="tstring_end">'</span></span><span class="comma">,</span>
  <span class="label">page:</span> <span class="int">1</span><span class="comma">,</span>
  <span class="label">per_page:</span> <span class="int">50</span><span class="comma">,</span>
  <span class="label">publishing_app:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">content-tagger</span><span class="tstring_end">'</span></span><span class="comma">,</span>
  <span class="label">fields:</span> <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">title</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">description</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">public_updated_at</span><span class="tstring_end">'</span></span><span class="rbracket">]</span><span class="comma">,</span>
  <span class="label">locale:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">en</span><span class="tstring_end">'</span></span><span class="comma">,</span>
  <span class="label">order:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">-public_updated_at</span><span class="tstring_end">'</span></span>
<span class="rparen">)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">params</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>At minimum, this hash has to include the <code>document_type</code> of the
content items we wish to see. All other optional keys are documented above.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2content" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2content">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2content</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_expanded_links-instance_method">
  
    - (<tt>Object</tt>) <strong>get_expanded_links</strong>(content_id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get expanded links</p>

<p>Return the expanded links of the item.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
publishing_api.get_expanded_links("8157589b-65e2-4df6-92ba-2c91d80006c0").to_h

#=&gt; {
  "content_id" =&gt; "8157589b-65e2-4df6-92ba-2c91d80006c0",
  "version" =&gt; 10,
  "expanded_links" =&gt; {
    "organisations" =&gt; [
      {
        "content_id" =&gt; "21aa83a2-a47f-4189-a252-b02f8c322012",
        ... (and more attributes)
      }
    ]
  }
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2expanded-linkscontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2expanded-linkscontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2expanded-linkscontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_linkables-instance_method">
  
    - (<tt>Object</tt>) <strong>get_linkables</strong>(document_type: nil, format: nil) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>FIXME: Add documentation</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkables" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkables">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkables</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_linked_items-instance_method">
  
    - (<tt>Object</tt>) <strong>get_linked_items</strong>(content_id, params = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>FIXME: Add documentation</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkedcontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkedcontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkedcontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_links-instance_method">
  
    - (<tt><span class="object_link">GdsApi::Response</span></tt>) <strong>get_links</strong>(content_id) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the link set for the given content_id.</p>

<p>Given a Content ID, it fetchs the existing link set and their version.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
publishing_api.get_links("a-content-id")
# =&gt; {
  "content_id" =&gt; "a-content-id",
  "links" =&gt; [
    "organisation" =&gt; "organisation-content-id",
    "document_collection" =&gt; "document-collection-content-id"
  ],
  "version" =&gt; 17
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">GdsApi::Response</span></tt>)</span>
      
      
      
        —
        <div class="inline">
<p>A response containing <code>links</code> and <code>version</code>.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkscontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkscontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#get-v2linkscontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_content_id-instance_method">
  
    - (<tt>UUID</tt>) <strong>lookup_content_id</strong>(base_path:) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Find the content_id for a base_path.</p>

<p>Convenience method if you only need to look up one content_id for a
base_path. For multiple base_paths, use
<span class="object_link"><a href="#lookup_content_ids-instance_method" title="GdsApi::PublishingApiV2#lookup_content_ids (method)">#lookup_content_ids</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
<span class="id identifier rubyid_publishing_api">publishing_api</span><span class="period">.</span><span class="id identifier rubyid_lookup_content_id">lookup_content_id</span><span class="lparen">(</span><span class="label">base_path:</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">/foo</span><span class="tstring_end">'</span></span><span class="rparen">)</span>
<span class="comment"># =&gt; "51ac4247-fd92-470a-a207-6b852a97f2db"</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">base_path</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>the <code>content_id</code> for the <code>base_path</code></p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_content_ids-instance_method">
  
    - (<tt>Hash</tt>) <strong>lookup_content_ids</strong>(base_paths:) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Find the content_ids for a list of base_paths.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
<span class="id identifier rubyid_publishing_api">publishing_api</span><span class="period">.</span><span class="id identifier rubyid_lookup_content_ids">lookup_content_ids</span><span class="lparen">(</span><span class="label">base_paths:</span> <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">/foo</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">/bar</span><span class="tstring_end">'</span></span><span class="rbracket">]</span><span class="rparen">)</span>
<span class="comment"># =&gt; { "/foo" =&gt; "51ac4247-fd92-470a-a207-6b852a97f2db", "/bar" =&gt; "261bd281-f16c-48d5-82d2-9544019ad9ca" }</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">base_paths</span>
      
      
        <span class="type">(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>a hash, keyed by <code>base_path</code> with <code>content_id</code> as
value</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-lookup-by-base-path</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="patch_links-instance_method">
  
    - (<tt>Object</tt>) <strong>patch_links</strong>(content_id, params) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Patch the links of a content item</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
<span class="id identifier rubyid_publishing_api">publishing_api</span><span class="period">.</span><span class="id identifier rubyid_patch_links">patch_links</span><span class="lparen">(</span>
  <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">86963c13-1f57-4005-b119-e7cf3cb92ecf</span><span class="tstring_end">'</span></span><span class="comma">,</span>
  <span class="label">links:</span> <span class="lbrace">{</span>
    <span class="label">topics:</span> <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">d6e1527d-d0c0-40d5-9603-b9f3e6866b8a</span><span class="tstring_end">'</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="label">mainstream_browse_pages:</span> <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">d6e1527d-d0c0-40d5-9603-b9f3e6866b8a</span><span class="tstring_end">'</span></span><span class="rbracket">]</span><span class="comma">,</span>
  <span class="rbrace">}</span><span class="comma">,</span>
  <span class="label">previous_version:</span> <span class="int">10</span><span class="comma">,</span>
  <span class="label">bulk_publishing:</span> <span class="kw">true</span>
<span class="rparen">)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">params</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>params</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">links</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>A “links hash”</p>
</div>
          
        </li>
      
        <li>
          <span class="name">previous_version</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>The previous version (returned by <code>get_links</code>). If this version
is not the current version, the publishing-api will reject the change and
return 409 Conflict. (optional)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">bulk_publishing</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>Set to true to indicate that this is part of a mass-republish. Allows the
publishing-api to prioritise human-initiated publishing (optional, default
false)</p>
</div>
          
        </li>
      
    </ul>
  


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#patch-v2linkscontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#patch-v2linkscontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#patch-v2linkscontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="publish-instance_method">
  
    - (<tt>Object</tt>) <strong>publish</strong>(content_id, update_type, options = {}) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Publish a content item</p>

<p>The publishing-api will “publish” a draft item, so that it will be visible
on the public site.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">update_type</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Either 'major', 'minor' or 'republish'</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">options</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">locale</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            — <div class="inline">
<p>The language, defaults to 'en' in publishing-api.</p>
</div>
          
        </li>
      
    </ul>
  


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idpublish" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idpublish">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idpublish</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_content-instance_method">
  
    - (<tt>Object</tt>) <strong>put_content</strong>(content_id, payload) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Put a content item</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">payload</span>
      
      
        <span class="type">(<tt>Hash</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>A valid content item</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#put-v2contentcontent_id" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#put-v2contentcontent_id">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#put-v2contentcontent_id</a></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unpublish-instance_method">
  
    - (<tt>Object</tt>) <strong>unpublish</strong>(content_id, type:, explanation: nil, alternative_path: nil, discard_drafts: false, allow_draft: false, previous_version: nil, locale: nil, unpublished_at: nil) 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unpublish a content item</p>

<p>The publishing API will “unpublish” a live item, to remove it from the
public site, or update an existing unpublishing.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">content_id</span>
      
      
        <span class="type">(<tt>UUID</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class="name">type</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>Either 'withdrawal', 'gone' or 'redirect'.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">explanation</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) Text to show on the page.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">alternative_path</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) Alternative path to show on the page or redirect to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">discard_drafts</span>
      
      
        <span class="type">(<tt>Boolean</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) Whether to discard drafts on that item. Defaults to false.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">previous_version</span>
      
      
        <span class="type">(<tt>Integer</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) A lock version number for optimistic locking.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">locale</span>
      
      
        <span class="type">(<tt>String</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) The content item locale.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">unpublished_at</span>
      
      
        <span class="type">(<tt>Time</tt>)</span>
      
      
      
        —
        <div class="inline">
<p>(optional) The time the content was withdrawn. Ignored for types other than
withdrawn</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idunpublish" target="_parent" title="https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idunpublish">https://github.com/alphagov/publishing-api/blob/master/doc/api.md#post-v2contentcontent_idunpublish</a></li>
    
  </ul>

</div>
</div>
    
  </div>


    </div>