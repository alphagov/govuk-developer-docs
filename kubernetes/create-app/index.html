


<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Create a new application on the GOV.UK Kubernetes Platform - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/kubernetes/create-app/">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="Create a new application on the GOV.UK Kubernetes Platform - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/kubernetes/create-app/" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="Create a new application on the GOV.UK Kubernetes Platform" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/kubernetes/create-app/" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
<li><a href="/kubernetes/"><span>GOV.UK Kubernetes cluster documentation for developers</span></a>
<ul>
  <li>
    <a href="/kubernetes/cheatsheet.html"><span>Kubernetes/EKS cheatsheet for GOV.UK developers</span></a>
    <ul>
      <li>
        <a href="/kubernetes/cheatsheet.html#prerequisites"><span>Prerequisites</span></a>
      </li>
      <li>
        <a href="/kubernetes/cheatsheet.html#common-tasks"><span>Common tasks</span></a>
        <ul>
          <li>
            <a href="/kubernetes/cheatsheet.html#view-recent-logs-for-an-app"><span>View recent logs for an app</span></a>
          </li>
          <li>
            <a href="/kubernetes/cheatsheet.html#open-a-rails-console"><span>Open a Rails console</span></a>
          </li>
          <li>
            <a href="/kubernetes/cheatsheet.html#open-a-shell-in-an-app-container"><span>Open a shell in an app container</span></a>
          </li>
          <li>
            <a href="/kubernetes/cheatsheet.html#open-a-shell-on-router"><span>Open a shell on Router</span></a>
          </li>
          <li>
            <a href="/kubernetes/cheatsheet.html#list-the-available-rake-tasks-for-an-app"><span>List the available Rake tasks for an app</span></a>
          </li>
          <li>
            <a href="/kubernetes/cheatsheet.html#run-a-rake-task"><span>Run a Rake task</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/cheatsheet.html#app-releases-and-rollouts-deployments"><span>App releases and rollouts / deployments</span></a>
      </li>
      <li>
        <a href="/kubernetes/cheatsheet.html#smokey-test-logs"><span>Smokey test logs</span></a>
      </li>
      <li>
        <a href="/kubernetes/cheatsheet.html#dashboards"><span>Dashboards</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/before-you-start/"><span>Before you start</span></a>
  </li>
<li><a href="/kubernetes/get-started/"><span>Get started</span></a>
<ul>
<li><a href="/kubernetes/get-started/tutorials/"><span>Tutorials</span></a>
<ul>
  <li>
    <a href="/kubernetes/get-started/tutorials/app-config-deploy-helm-chart/"><span>Update an application’s environment configuration</span></a>
  </li>
  <li>
    <a href="/kubernetes/get-started/tutorials/app-update-deploy-monitor-logs/"><span>Deploy a new version of the example test app, check the deployment, monitor the app on Grafana and view application logs</span></a>
    <ul>
      <li>
        <a href="/kubernetes/get-started/tutorials/app-update-deploy-monitor-logs/#maintenance"><span>Maintenance</span></a>
      </li>
    </ul>
  </li>
</ul>
</li>
  <li>
    <a href="/kubernetes/get-started/set-up-tools/"><span>Set up tools to use the GOV.UK Kubernetes platform</span></a>
    <ul>
      <li>
        <a href="/kubernetes/get-started/set-up-tools/#install-kubectl"><span>Install kubectl</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/set-up-tools/#install-helm"><span>Install Helm</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/set-up-tools/#install-argo-cli"><span>Install Argo CLI</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/set-up-tools/#install-gds-cli-and-aws-vault"><span>Install gds-cli and aws-vault</span></a>
        <ul>
          <li>
            <a href="/kubernetes/get-started/set-up-tools/#install-gds-cli"><span>Install gds-cli</span></a>
          </li>
          <li>
            <a href="/kubernetes/get-started/set-up-tools/#install-aws-vault"><span>Install aws-vault</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/get-started/access-eks-cluster/"><span>Access a GOV.UK EKS cluster</span></a>
    <ul>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#prerequisites"><span>Prerequisites</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#obtain-aws-credentials-for-your-role-in-the-clusters-aws-account"><span>Obtain AWS credentials for your role in the cluster’s AWS account</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#note-about-using-the-correct-role"><span>Note: About using the correct role</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#access-a-cluster-for-the-first-time"><span>Access a cluster for the first time</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#access-a-cluster-that-you-have-accessed-before"><span>Access a cluster that you have accessed before</span></a>
      </li>
      <li>
        <a href="/kubernetes/get-started/access-eks-cluster/#working-with-multiple-clusters-at-once"><span>Working with multiple clusters at once</span></a>
      </li>
    </ul>
  </li>
</ul>
</li>
  <li>
    <a href="/kubernetes/create-app/"><span>Create a new application</span></a>
    <ul>
      <li>
        <a href="/kubernetes/create-app/#assumptions"><span>Assumptions</span></a>
      </li>
      <li>
        <a href="/kubernetes/create-app/#create-a-new-gov-uk-repository-for-your-application"><span>Create a new GOV.UK repository for your application</span></a>
      </li>
      <li>
        <a href="/kubernetes/create-app/#set-up-sentry-for-your-application"><span>Set up Sentry for your application</span></a>
      </li>
      <li>
        <a href="/kubernetes/create-app/#set-up-ci-for-your-application"><span>Set up CI for your application</span></a>
        <ul>
          <li>
            <a href="/kubernetes/create-app/#allow-your-application-to-be-built-as-a-docker-image"><span>Allow your application to be built as a Docker image</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#add-github-actions-workflows"><span>Add GitHub Actions workflows</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/create-app/#deploy-app-to-environments"><span>Deploy app to environments</span></a>
        <ul>
          <li>
            <a href="/kubernetes/create-app/#creating-your-first-release"><span>Creating your first release</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#add-image-tag-files-to-govuk-helm-charts"><span>Add image tag files to govuk-helm-charts</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#add-initial-secrets-to-aws-secrets-manager"><span>Add initial secrets to AWS Secrets Manager</span></a>
            <ul>
              <li>
                <a href="/kubernetes/create-app/#rails"><span>Rails</span></a>
              </li>
              <li>
                <a href="/kubernetes/create-app/#sentry"><span>Sentry</span></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/kubernetes/create-app/#add-app-to-app-config-chart-values"><span>Add app to app-config chart values</span></a>
            <ul>
              <li>
                <a href="/kubernetes/create-app/#validate-your-deployment"><span>Validate your deployment</span></a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/create-app/#congratulations"><span>Congratulations!</span></a>
      </li>
      <li>
        <a href="/kubernetes/create-app/#annex-boilerplate-files"><span>Annex: boilerplate files</span></a>
        <ul>
          <li>
            <a href="/kubernetes/create-app/#dockerfile"><span>Dockerfile</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#-dockerignore"><span>.dockerignore</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#ci-workflow"><span>CI workflow</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#deploy-workflow"><span>Deploy workflow</span></a>
          </li>
          <li>
            <a href="/kubernetes/create-app/#release-workflow"><span>Release workflow</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
<li><a href="/kubernetes/manage-app/"><span>Manage your app</span></a>
<ul>
  <li>
    <a href="/kubernetes/manage-app/get-app-info/"><span>Get information about your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#choose-and-set-a-namespace"><span>Choose and set a namespace</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#get-a-list-of-all-deployed-apps-in-a-namespace"><span>Get a list of all deployed apps in a namespace</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#describe-an-app-deployment"><span>Describe an app deployment</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#list-all-pods-in-an-app"><span>List all pods in an app</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#describe-a-pod"><span>Describe a pod</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#view-app-logs"><span>View app logs</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#view-kubernetes-events"><span>View Kubernetes events</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/get-app-info/#via-logit"><span>Via logit</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/get-app-info/#via-kubectl-only-the-last-1-hour"><span>Via kubectl (only the last 1 hour)</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#view-out-of-memory-events"><span>View Out of Memory Events</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/get-app-info/#further-information"><span>Further information</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/manage-state/"><span>Manage state in your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/manage-state/#troubleshooting"><span>Troubleshooting</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/manage-state/#argo-application-sync-stuck-waiting-for-waiting-for-completion-of-hook"><span>Argo application sync stuck waiting for “waiting for completion of hook”</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/set-env-var/"><span>Set or change an environment variable for your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/set-env-var/#update-an-ordinary-non-secret-environment-variable"><span>Update an ordinary (non-secret) environment variable</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/set-env-var/#per-app-environment-variables"><span>Per-app environment variables</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/set-env-var/#global-environment-variables"><span>Global environment variables</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/manage-app/set-env-var/#update-an-environment-variable-from-a-secrets-manager-secret"><span>Update an environment variable from a Secrets Manager secret</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/scale-app/"><span>Scale your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/scale-app/#scaling-your-app"><span>Scaling your app</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/scale-app/#what-you-can-scale"><span>What you can scale</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/scale-app/#vertically-scaling-your-app"><span>Vertically scaling your app</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/scale-app/#horizontally-scaling-your-app"><span>Horizontally scaling your app</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/manage-app/scale-app/#how-scaling-your-app-affects-platform-resources"><span>How scaling your app affects platform resources</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/roll-back-app/"><span>Roll back your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/roll-back-app/#updating-the-image-tag-to-an-older-release"><span>Updating the image tag to an older release</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/roll-back-app/#triggering-the-deploy-github-action-to-deploy-an-older-release"><span>Triggering the deploy GitHub Action to deploy an older release</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/roll-back-app/#re-enabling-automatic-image-updates-after-manual-deploys"><span>Re-enabling automatic image updates after manual deploys</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/set-permissions/"><span>Set security restrictions for your app</span></a>
  </li>
  <li>
    <a href="/kubernetes/manage-app/manage-secrets/"><span>Add secrets to your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/manage-secrets/#creating-the-secret-in-aws-secrets-manager"><span>Creating the secret in AWS Secrets Manager</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/manage-secrets/#creating-an-aws-managed-database-secret"><span>Creating an AWS managed database secret</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/manage-secrets/#creating-a-non-database-secret"><span>Creating a non-database secret</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/manage-app/manage-secrets/#defining-an-externalsecret-in-kubernetes"><span>Defining an ExternalSecret in Kubernetes</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/manage-secrets/#use-the-kubernetes-secret-inside-the-app"><span>Use the Kubernetes secret inside the app</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/manage-secrets/#supporting-information"><span>Supporting information</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/create-new-env/"><span>Create a new environment</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#create-a-new-aws-account"><span>Create a new AWS account</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#create-secrets-for-the-new-environment"><span>Create secrets for the new environment</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#deploy-the-terraform-modules"><span>Deploy the Terraform modules</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/create-new-env/#1-deploy-the-ecr-module"><span>1. Deploy the ecr module</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/create-new-env/#2-deploy-the-cluster-infrastructure-module"><span>2. Deploy the cluster-infrastructure module</span></a>
            <ul>
              <li>
                <a href="/kubernetes/manage-app/create-new-env/#delete-the-aws-auth-configmap"><span>Delete the aws-auth configmap</span></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/kubernetes/manage-app/create-new-env/#3-deploy-the-govuk-publishing-infrastructure-module"><span>3. Deploy the govuk-publishing-infrastructure module</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/create-new-env/#4-deploy-the-cluster-services-module"><span>4. Deploy the cluster-services module</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#check-the-environment-is-working"><span>Check the environment is working</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#setting-access-permissions"><span>Setting access permissions</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/create-new-env/#supporting-information"><span>Supporting information</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/manage-app/control-healthchecks/"><span>Healthchecks</span></a>
    <ul>
      <li>
        <a href="/kubernetes/manage-app/control-healthchecks/#choosing-a-different-healthcheck-endpoint"><span>Choosing a different healthcheck endpoint</span></a>
      </li>
      <li>
        <a href="/kubernetes/manage-app/control-healthchecks/#kubernernetes-probes"><span>Kubernernetes Probes</span></a>
        <ul>
          <li>
            <a href="/kubernetes/manage-app/control-healthchecks/#startup-probe"><span>Startup Probe</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/control-healthchecks/#readiness-probe"><span>Readiness Probe</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/control-healthchecks/#liveness-probe"><span>Liveness Probe</span></a>
          </li>
          <li>
            <a href="/kubernetes/manage-app/control-healthchecks/#probe-lifecycle"><span>Probe lifecycle</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
</li>
  <li>
    <a href="/kubernetes/fix-app/"><span>Fix your app</span></a>
    <ul>
      <li>
        <a href="/kubernetes/fix-app/#fixing-an-apps-configuration"><span>Fixing an app’s configuration</span></a>
      </li>
      <li>
        <a href="/kubernetes/fix-app/#allocating-more-resources-to-an-app"><span>Allocating more resources to an app</span></a>
      </li>
      <li>
        <a href="/kubernetes/fix-app/#giving-an-app-access-to-required-aws-services"><span>Giving an app access to required AWS services</span></a>
      </li>
      <li>
        <a href="/kubernetes/fix-app/#if-you-suspect-a-problem-with-the-cluster-itself"><span>If you suspect a problem with the cluster itself</span></a>
      </li>
      <li>
        <a href="/kubernetes/fix-app/#general-debugging"><span>General debugging</span></a>
        <ul>
          <li>
            <a href="/kubernetes/fix-app/#getting-logs-for-your-apps"><span>Getting logs for your apps</span></a>
          </li>
          <li>
            <a href="/kubernetes/fix-app/#creating-a-shell-inside-a-running-container"><span>Creating a shell inside a running container</span></a>
          </li>
          <li>
            <a href="/kubernetes/fix-app/#port-forwarding-to-a-pod"><span>Port-forwarding to a pod</span></a>
          </li>
          <li>
            <a href="/kubernetes/fix-app/#following-a-troubleshooting-guide"><span>Following a troubleshooting guide</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/how-platform-works/"><span>How the platform works</span></a>
    <ul>
      <li>
        <a href="/kubernetes/how-platform-works/#platform-cluster-add-ons"><span>Platform cluster add-ons</span></a>
        <ul>
          <li>
            <a href="/kubernetes/how-platform-works/#external-secrets"><span>External secrets</span></a>
          </li>
          <li>
            <a href="/kubernetes/how-platform-works/#externaldns"><span>ExternalDNS</span></a>
          </li>
          <li>
            <a href="/kubernetes/how-platform-works/#aws-load-balancer-controller"><span>AWS load balancer controller</span></a>
          </li>
          <li>
            <a href="/kubernetes/how-platform-works/#cluster-autoscaler"><span>Cluster autoscaler</span></a>
          </li>
          <li>
            <a href="/kubernetes/how-platform-works/#dex-openid-connect-provider"><span>Dex OpenID connect provider</span></a>
          </li>
          <li>
            <a href="/kubernetes/how-platform-works/#aws-ebs-csi-driver"><span>AWS EBS CSI Driver</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/kubernetes/how-platform-works/#platform-cluster-user-authentication"><span>Platform cluster user authentication</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/contact-platform-engineering-team.html"><span>GOV.UK Platform Engineering team</span></a>
    <ul>
      <li>
        <a href="/kubernetes/contact-platform-engineering-team.html#get-in-touch"><span>Get in touch</span></a>
      </li>
      <li>
        <a href="/kubernetes/contact-platform-engineering-team.html#what-we-can-help-with"><span>What we can help with</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/creating-a-new-database/"><span>Creating a new database</span></a>
    <ul>
      <li>
        <a href="/kubernetes/creating-a-new-database/#update-the-tfc-configuration-variables"><span>Update the TFC configuration variables</span></a>
      </li>
      <li>
        <a href="/kubernetes/creating-a-new-database/#create-a-database-secret"><span>Create a database secret</span></a>
      </li>
      <li>
        <a href="/kubernetes/creating-a-new-database/#create-database-and-user"><span>Create database and user</span></a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/kubernetes/how-to-disable-or-re-enable-an-app/"><span>How to disable or re-enable an app in EKS</span></a>
    <ul>
      <li>
        <a href="/kubernetes/how-to-disable-or-re-enable-an-app/#pre-requisites"><span>Pre-requisites</span></a>
      </li>
      <li>
        <a href="/kubernetes/how-to-disable-or-re-enable-an-app/#disabling-an-app"><span>Disabling an app</span></a>
      </li>
      <li>
        <a href="/kubernetes/how-to-disable-or-re-enable-an-app/#re-enabling-an-app"><span>Re-enabling an app</span></a>
      </li>
    </ul>
  </li>
</ul>
</li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
                <div class="govuk-!-font-size-16 govuk-!-margin-top-6">

  Last updated: <a href="https://github.com/alphagov/govuk-developer-docs/commit/01580acca13fae61ca8a84eb5d08e8cd9754d526">18 Dec 2025</a>
</div>

 <h1 id='create-a-new-application'>Create a new application</h1><h2 id='assumptions'>Assumptions</h2><p>This guide assumes the following:</p>

<ul>
<li>You have an approved ADR or RFC document for the new application</li>
<li>You have completed all the steps in the <a href="/manual/get-started.html">&ldquo;get started&rdquo; guide</a> of the developer docs</li>
<li>You are deploying an application named <code>example</code> (make sure to replace this with your
application name in all steps as needed)</li>
</ul>
<h2 id='create-a-new-gov-uk-repository-for-your-application'>Create a new GOV.UK repository for your application</h2><p>Follow the steps in the <a href="/manual/github-new-repo.html">&ldquo;Configure a new GOV.UK repository&rdquo; guide</a>.</p>
<p>This should have set up your application, and pushed your source code to a Github repository under the <code>alphagov</code> organisation with the <code>govuk</code> and <code>container</code> labels applied</p>
<h2 id='set-up-sentry-for-your-application'>Set up Sentry for your application</h2><p>You will need to set up Sentry for your app by adding it to the <a href="https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/sentry/locals.tf">Sentry terraform file</a></p>
<h2 id='set-up-ci-for-your-application'>Set up CI for your application</h2>
<ol>
<li><a href="#allow-your-application-to-be-built-as-a-docker-image">Allow your application to be built as a Docker image</a></li>
<li><a href="#add-gitHub-actions-workflows">Add GitHub actions workflows to your app</a></li>
<li>Create a release of your app. You’ll need to manually <a href="#creating-your-first-release">create the first release</a> so that it can be picked up by the GitHub actions.</li>
</ol>
<h3 id='allow-your-application-to-be-built-as-a-docker-image'>Allow your application to be built as a Docker image</h3><p>Add a <a href="#dockerfile">Dockerfile</a> and <a href="#-dockerignore"><code>.dockerignore</code> file</a> to your app. This is different to setting up govuk-docker. This Dockerfile allows CI to build your app.</p>
<p>If your application is written in Ruby, this should normally be based on the <a href="https://github.com/alphagov/govuk-ruby-images">GOV.UK Ruby Images</a>. This should do everything necessary to create a
standalone image for your application.</p>
<h3 id='add-github-actions-workflows'>Add GitHub Actions workflows</h3><p>You will need to add (at least) the following workflows under <code>.github/workflows</code>:</p>

<ul>
<li><a href="#ci-workflow">CI</a> to test your application</li>
<li><a href="#release-workflow">release</a> to create new releases and version tags</li>
<li><a href="#deploy-workflow">deploy</a> to build/push an image and trigger deployment by updating image tags</li>
</ul>
<p>Your Continuous Integration (CI) workflow will depend on the linting and testing needs of your
application, but will act as a dependency for further workflows to block deployment in case of
failure.</p>
<h2 id='deploy-app-to-environments'>Deploy app to environments</h2><p>Start with Integration</p>

<ol>
<li><a href="#add-image-tag-files-to-govuk-helm-charts">Add image tag file to govuk-helm-charts</a> for integration

<ul>
<li>Set your initial image_tag value to match the version number of <a href="#creating-your-first-release">your first release</a>. Do not use “latest”, this will result in issues with your application pulling in updates.</li>
</ul></li>
<li><a href="#add-initial-secrets-to-aws-secrets-manager">Add secrets in AWS Secrets Manager</a></li>
<li><a href="#add-app-to-app-config-chart-values">Add app to app-config chart values</a> in <a href="https://github.com/alphagov/govuk-helm-charts/blob/main/charts/app-config/values-integration.yaml">integration</a></li>
<li>Add a <a href="https://github.com/alphagov/govuk-infrastructure/pull/3289/files">CNAME record</a> for your application in the Integration environment</li>
<li><a href="#validate-your-deployment">Check that your app builds correctly in Argo CD</a></li>
</ol>
<p>Once the app builds successfully, follow the Deploy steps for <a href="https://github.com/alphagov/govuk-helm-charts/blob/main/charts/app-config/values-staging.yaml">Staging</a> and <a href="https://github.com/alphagov/govuk-helm-charts/blob/main/charts/app-config/values-production.yaml">Production</a>.</p>
<p>Set <code>promote_deployment: true</code> if you want automatic promotions to higher environments.</p>
<h3 id='creating-your-first-release'>Creating your first release</h3><p>To create the first release of your app:</p>

<ol>
<li>Merge a pull request into the <code>main</code> branch. It is important that the commit at tip of the branch is a merge commit.</li>
<li><p>Tag the commit at the tip of the <code>main</code> branch with &ldquo;v1&rdquo; and push it up</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code>git tag v1
git push origin v1
</code></pre></div></li>
<li><p>Trigger the <code>deploy</code> workflow by visiting the workflow under Actions tab in GitHub and pressing &ldquo;Run workflow&rdquo;.</p></li>
</ol>
<h3 id='add-image-tag-files-to-govuk-helm-charts'>Add image tag files to <code>govuk-helm-charts</code></h3><p><a href="https://github.com/alphagov/govuk-helm-charts">GOV.UK Helm Charts</a> uses image tag files to keep track of the image tag deployed into each environment, as well as the <a href="https://docs.publishing.service.gov.uk/manual/deployments.html#deployment-configuration">deployment configuration</a>. Add an initial image tag file named after your application into the <code>image-tags</code> folder for each of the four environments, i.e. <code>charts/app-config/image-tags/{test,integration,staging/production}/example</code>:</p>
<div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>image_tag: latest
automatic_deploys_enabled: true
promote_deployment: false
</code></pre></div><h3 id='add-initial-secrets-to-aws-secrets-manager'>Add initial secrets to AWS Secrets Manager</h3><h4 id='rails'>Rails</h4><p>Rails applications use <code>SECRET_KEY_BASE</code>. <a href="https://guides.rubyonrails.org/command_line.html#bin-rails-secret">Rails</a> allows you to generate these
using <code>rails secret</code>. This must be manually added as a key/value pair to the <code>govuk/common/rails-secret-key-base</code> secret in all three environments.</p>
<h4 id='sentry'>Sentry</h4><p>In order to set up Sentry for your app, you will need a <em>DSN</em> from the Sentry UI.</p>

<ul>
<li>Go to <code>Settings -&gt; Projects</code></li>
<li>Select your project (e.g. <code>account-api</code>)</li>
<li>Select <code>Settings -&gt; Client Keys (DSN)</code></li>
</ul>
<p>This must be manually added as a key/value pair to the <code>govuk/common/sentry</code> secret in all three environments.</p>
<h3 id='add-app-to-app-config-chart-values'>Add app to <code>app-config</code> chart values</h3><p>Start off by adding your app to the environment by adding it to the array of application
Helm chart values in <code>charts/app-config/values-{environment}.yaml</code>. This can be as simple as:</p>
<div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">example</span>
</code></pre></div><p>This will use the <a href="https://github.com/alphagov/govuk-helm-charts/blob/main/charts/generic-govuk-app/">generic-govuk-app</a> Helm chart to set up your application. You can
find the default values in <code>values.yaml</code> in the chart folder, and amend your configuration&rsquo;s
<code>helmValues</code> value to override them.</p>
<p>For example, if your app needs a <code>RETICULATE_SPLINES</code> environment variable set to &ldquo;1&rdquo; in a given
environment, your integration configuration could look like this:</p>
<div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">example</span>
  <span class="na">helmValues</span><span class="pi">:</span>
    <span class="na">extraEnv</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RETICULATE_SPLINES</span>
        <span class="na">value</span><span class="pi">:</span> <span class="m">1</span>
</code></pre></div><p>There are <a href="https://github.com/alphagov/govuk-helm-charts/blob/main/charts/generic-govuk-app/values.yaml">configuration options</a>
available for a wide range of different needs your application may have, from mounting volumes to disabling the default asset upload.</p>
<h4 id='validate-your-deployment'>Validate your deployment</h4><p>You can now trigger your Deploy GitHub action to push an image to AWS ECS, and visit <a href="https://argo.eks.integration.govuk.digital/applications">Integration
Argo CD</a>. After a short wait, your new application will be available to find on the
dashboard.</p>
<h2 id='congratulations'>Congratulations!</h2><p>You&rsquo;ve deployed an application to the Kubernetes platform!</p>
<h2 id='annex-boilerplate-files'>Annex: boilerplate files</h2><p>This annex contains a number of boilerplate files whose contents you can copy into your new application. They are each
referenced earlier in the document.</p>
<h3 id='dockerfile'>Dockerfile</h3><div class="highlight"><pre class="highlight docker" tabindex="0"><code><span class="k">ARG</span><span class="s"> ruby_version=3.4</span>
<span class="k">ARG</span><span class="s"> base_image=ghcr.io/alphagov/govuk-ruby-base:$ruby_version</span>
<span class="k">ARG</span><span class="s"> builder_image=ghcr.io/alphagov/govuk-ruby-builder:$ruby_version</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">$builder_image</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>

<span class="k">WORKDIR</span><span class="s"> $APP_HOME</span>
<span class="k">COPY</span><span class="s"> Gemfile* .ruby-version ./</span>
<span class="k">RUN </span>bundle <span class="nb">install</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span>bootsnap precompile <span class="nt">--gemfile</span> .

<span class="k">FROM</span><span class="s"> $base_image</span>

<span class="k">ENV</span><span class="s"> GOVUK_APP_NAME=NEW_APP_NAME</span>

<span class="k">WORKDIR</span><span class="s"> $APP_HOME</span>
<span class="k">COPY</span><span class="s"> --from=builder $BUNDLE_PATH $BUNDLE_PATH</span>
<span class="k">COPY</span><span class="s"> --from=builder $BOOTSNAP_CACHE_DIR $BOOTSNAP_CACHE_DIR</span>
<span class="k">COPY</span><span class="s"> --from=builder $APP_HOME .</span>

<span class="k">USER</span><span class="s"> app</span>
<span class="k">CMD</span><span class="s"> ["puma"]</span>
</code></pre></div><h3 id='-dockerignore'><code>.dockerignore</code></h3><div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>/.git/
/.bundle
!/.env.example
/log/*
!/log/.keep
tmp
</code></pre></div><h3 id='ci-workflow'>CI workflow</h3><div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="na">name</span><span class="pi">:</span> <span class="s">CI</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>
  <span class="na">pull_request</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">ref</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">The</span><span class="nv"> </span><span class="s">branch,</span><span class="nv"> </span><span class="s">tag</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">SHA</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">checkout'</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s">main</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">codeql-sast</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">CodeQL SAST scan</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/codeql-analysis.yml@main</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="na">security-events</span><span class="pi">:</span> <span class="s">write</span>

  <span class="na">dependency-review</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Dependency Review scan</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/dependency-review.yml@main</span>

  <span class="na">lint-ruby</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Lint Ruby</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/rubocop.yml@main</span>

  <span class="na">security-analysis</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Security Analysis</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/brakeman.yml@main</span>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s">inherit</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
      <span class="na">security-events</span><span class="pi">:</span> <span class="s">write</span>
      <span class="na">actions</span><span class="pi">:</span> <span class="s">read</span>

  <span class="na">test-ruby</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Test Ruby / Run RSpec</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">env</span><span class="pi">:</span>
      <span class="c1"># As we're running the tests through Rake, we need to make sure they are run in the `test`</span>
      <span class="c1"># Rails env rather than `development`</span>
      <span class="na">RAILS_ENV</span><span class="pi">:</span> <span class="s">test</span>
      <span class="c1"># All Google client library calls are mocked, but the application needs this set to boot</span>
      <span class="na">GOOGLE_CLOUD_PROJECT_ID</span><span class="pi">:</span> <span class="s">not-used</span>
      <span class="na">GOOGLE_CLOUD_PROJECT_ID_NUMBER</span><span class="pi">:</span> <span class="s">not-used</span>
      <span class="na">DISCOVERY_ENGINE_DEFAULT_COLLECTION_NAME</span><span class="pi">:</span> <span class="s">not-used</span>
      <span class="na">DISCOVERY_ENGINE_DEFAULT_LOCATION_NAME</span><span class="pi">:</span> <span class="s">not-used</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v6</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">ref</span><span class="pi">:</span> <span class="s">${{ inputs.ref || github.ref }}</span>
          <span class="na">show-progress</span><span class="pi">:</span> <span class="no">false</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">ruby/setup-ruby@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">bundler-cache</span><span class="pi">:</span> <span class="no">true</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">bin/rake</span>
</code></pre></div><h3 id='deploy-workflow'>Deploy workflow</h3><div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>

<span class="na">run-name</span><span class="pi">:</span> <span class="s">Deploy ${{ inputs.gitRef || github.event.release.tag_name  }} to ${{ inputs.environment || 'integration' }}</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">gitRef</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Commit,</span><span class="nv"> </span><span class="s">tag</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">branch</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">deploy'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Environment</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">deploy</span><span class="nv"> </span><span class="s">to'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">choice</span>
        <span class="na">options</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">integration</span>
        <span class="pi">-</span> <span class="s">staging</span>
        <span class="pi">-</span> <span class="s">production</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">integration'</span>
  <span class="na">release</span><span class="pi">:</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">released</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build-and-publish-image</span><span class="pi">:</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'workflow_dispatch' || startsWith(github.event.release.tag_name, 'v')</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Build and publish image</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/build-and-push-multiarch-image.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">gitRef</span><span class="pi">:</span> <span class="s">${{ inputs.gitRef || github.event.release.tag_name }}</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>
      <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
      <span class="na">packages</span><span class="pi">:</span> <span class="s">write</span>
  <span class="na">trigger-deploy</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Trigger deploy to ${{ inputs.environment || 'integration' }}</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">build-and-publish-image</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/deploy.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">imageTag</span><span class="pi">:</span> <span class="s">${{ needs.build-and-publish-image.outputs.imageTag }}</span>
      <span class="na">environment</span><span class="pi">:</span> <span class="s">${{ inputs.environment || 'integration' }}</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">WEBHOOK_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GOVUK_ARGO_EVENTS_WEBHOOK_TOKEN }}</span>
      <span class="na">WEBHOOK_URL</span><span class="pi">:</span> <span class="s">${{ secrets.GOVUK_ARGO_EVENTS_WEBHOOK_URL }}</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GOVUK_CI_GITHUB_API_TOKEN }}</span>
</code></pre></div><h3 id='release-workflow'>Release workflow</h3><div class="highlight"><pre class="highlight yaml" tabindex="0"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Release</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
  <span class="na">workflow_run</span><span class="pi">:</span>
    <span class="na">workflows</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">CI</span><span class="pi">]</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">completed</span><span class="pi">]</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">release</span><span class="pi">:</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'workflow_dispatch' || github.event.workflow_run.conclusion == 'success'</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Release</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">alphagov/govuk-infrastructure/.github/workflows/release.yml@main</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GOVUK_CI_GITHUB_API_TOKEN }}</span>
</code></pre></div>
  <script>
    /*
      Manually trigger the styling of the 'current page' in the sidebar,
      as it does not happen automatically because we are still technically
      in single page mode.
    */
    (function () {
        'use strict'
        /*
          Cannot use `$(document).ready` on next line as jQuery has not loaded
          yet. But we can use jQuery in the callback.
        */
        window.addEventListener('load', function () {
            try {
                new GOVUK.Modules.InPageNavigation().start($("html"));
            }
            catch (error) {
                /* Fail without causing other JS in the page to break */
                console.log("Error calling GOVUK's InPageNavigation module", error);
            }
        })
    }());
</script>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/master/source/kubernetes/create-app/index.html.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27Create+a+new+application+on+the+GOV.UK+Kubernetes+Platform%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Fkubernetes%2Fcreate-app%2F%29&amp;labels=bug&amp;title=Re%3A+%27Create+a+new+application+on+the+GOV.UK+Kubernetes+Platform%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
