<% content_for :sidebar do %>
  &nbsp;
  <%
    # TODO: recreate table of contents as per the default layout: https://tdt-documentation.london.cloudapps.digital/configure_project/frontmatter/#layout
    # For now, keep whitespace so that `sidebar` isn't `nil`, otherwise we'd lose the sidebar/search altogether.
  %>
<% end %>

<% wrap_layout :core do %>
  <% app_slug = current_page.path.match(/repos\/([^\/]+)\//) %>
  <%= GovukPublishingComponents.render("govuk_publishing_components/components/breadcrumbs", {
    breadcrumbs: [
      { title: "Home", url: "/" },
      current_page.path != "apps.html" ? { title: "Apps", url: "/apps.html" } : nil,
      app_slug ? { title: app_slug[1], url: "/repos/#{app_slug[1]}.html" } : nil,
    ].compact,
  }) %>
  <%= partial 'partials/last_updated' if current_page.data.show_last_updated %>
  <%= partial 'partials/header' %>
  <%= yield %>
<% end %>
