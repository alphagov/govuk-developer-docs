---
owner_slack: "#govuk-2ndline"
title: Republish content
section: Publishing
layout: manual_layout
parent: "/manual.html"
---

Sometimes it may be necessary to republish content to make it show up on the website. For example if we make an update to [govspeak][govspeak-repo] that would require us to re-render and save new HTML for content.

This process varies per app and requires

- Connection to the [VPN][vpn] and
- [Production access][production-access]

## Whitehall

If the documents are in Whitehall, there are Rake tasks you can run as outlined below. Try to pick the one most focused to the scope of what you need to republish to avoid unnecessary load. You can monitor the effect on the publishing queue via these Grafana dashboards:

- [integration](https://grafana.integration.publishing.service.gov.uk/dashboard/file/sidekiq.json?refresh=1m&orgId=1&var-Application=whitehall&var-Interval=$__auto_interval)
- [staging](https://grafana.blue.staging.govuk.digital/dashboard/file/sidekiq.json?refresh=1m&orgId=1&var-Application=whitehall&var-Interval=$__auto_interval)
- [production](https://grafana.blue.production.govuk.digital/dashboard/file/sidekiq.json?refresh=1m&orgId=1&var-Application=whitehall&var-Interval=$__auto_interval)

<%= RunRakeTask.links("whitehall", "publishing_api:republish_document[slug]") %>

For organisations, use the `organisation_by_slug` rake task:

<%= RunRakeTask.links("whitehall", "publishing_api:republish:organisation_by_slug[slug]") %>

For all of a single document type, use the `bulk_republish` rake task:

<%= RunRakeTask.links("whitehall", "publishing_api:bulk_republish:document_type[DocumentClass]") %>

For example:
`/government/case-studies/alexander-dennis-maximum-capacity`
`publishing_api:bulk_republish:document_type[CaseStudies]`

You may wish to test first on Integration.

For a short list of Content IDs, use the `documents_by_content_ids` rake task:

<%= RunRakeTask.links("whitehall", "publishing_api:bulk_republish:documents_by_content_ids[content_id_1 content_id_2]") %>

For a significant number of Content IDs, some preparation is needed for this as a CSV file needs to be in place.

1. The CSV should have a column called content_id that contains all the relevant IDS. This should be added to the whitehall repository at `lib/tasks/{FILENAME}.csv`.
1. Run the `documents_by_content_ids_from_csv` rake task:
   <%= RunRakeTask.links("whitehall", "publishing_api:bulk_republish:documents_by_content_ids_from_csv[csv_file_name]") %>
1. After the job has completed, remove the CSV from the repository.

To republish all documents:
Caution: this is a lot of content and will take hours to complete. If it is possible to scope the republish do so and use a different task, but if you have made a change such as something in govspeak that will affect the majority of content, this is available. Before running this job confirm with 2nd line that they are happy for you to proceed as it could cause backed up publishing queues and alerts.

<%= RunRakeTask.links("whitehall", "publishing_api:bulk_republish:all") %>

## Content Publisher

If the document is in content publisher, there is a [resync Rake task][resync-rake-task] you can run.

You can resync a single document by passing it a content ID and locale:

<%= RunRakeTask.links("content-publisher", "resync:document[a-content-id:locale]") %>

or you can resync all documents:

<%= RunRakeTask.links("content-publisher", "resync:all") %>

[govspeak-repo]: https://github.com/alphagov/govspeak/
[resync-rake-task]: https://github.com/alphagov/content-publisher/blob/main/lib/tasks/resync.rake
[production-access]:https://docs.publishing.service.gov.uk/manual/rules-for-getting-production-access.html
