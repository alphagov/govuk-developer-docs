





<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>GOV.UK content mirrors - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/manual/fall-back-to-mirror.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="GOV.UK content mirrors - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/manual/fall-back-to-mirror.html" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="GOV.UK content mirrors" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/manual/fall-back-to-mirror.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/manual.html" aria-current="page">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <a href='/manual.html' class="toc__back-link govuk-link">&lsaquo; Manual</a>
  <ul>
  <li>
    <a href="#header"><span>GOV.UK content mirrors</span></a>
    <ul>
      <li>
        <a href="#architecture"><span>Architecture</span></a>
        <ul>
          <li>
            <a href="#how-content-flows-through-the-mirror-system"><span>How content flows through the mirror system</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#available-mirrors"><span>Available mirrors</span></a>
        <ul>
          <li>
            <a href="#gcp-gcs-mirror"><span>GCP (GCS) Mirror</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#when-is-the-gov-uk-mirror-used"><span>When is the GOV.UK mirror used?</span></a>
        <ul>
          <li>
            <a href="#fastly-failover-behavior"><span>Fastly failover behavior</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#how-are-the-mirrors-populated"><span>How are the mirrors populated?</span></a>
      </li>
      <li>
        <a href="#what-is-not-covered-by-mirrors"><span>What is not covered by mirrors?</span></a>
      </li>
      <li>
        <a href="#monitoring-health-checks"><span>Monitoring & Health Checks</span></a>
        <ul>
          <li>
            <a href="#success-signals"><span>Success signals</span></a>
          </li>
          <li>
            <a href="#content-level-checks"><span>Content-level checks</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#failure-indicators"><span>Failure Indicators</span></a>
        <ul>
          <li>
            <a href="#signs-that-mirrors-may-need-investigation"><span>Signs that mirrors may need investigation</span></a>
          </li>
          <li>
            <a href="#investigation-steps"><span>Investigation steps</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#troubleshooting"><span>Troubleshooting</span></a>
        <ul>
          <li>
            <a href="#how-to-poke-it"><span>How to poke it</span></a>
          </li>
          <li>
            <a href="#common-checks"><span>Common checks</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#known-gaps-potential-future-work"><span>Known Gaps & Potential Future Work</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
                
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Deployment",
        "@id": "http://www.dev.gov.uk/manual.html#deployment"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/manual.html#deployment">Deployment</a>
        </li>
  </ol>
</nav>
   <div class="govuk-!-font-size-16 govuk-!-margin-top-6">

  Last updated: <a href="https://github.com/alphagov/govuk-developer-docs/commit/5fe56620a776a7378a228e7290f02bd9ece169fb">12 Feb 2026</a>
</div>

 <h1 id='header'>GOV.UK content mirrors</h1> <p>A GOV.UK mirror is a static copy of pages and assets hosted on www.gov.uk or assets.publishing.service.gov.uk (or equivalent domains in integration and staging). A mirror includes:</p>

<ul>
<li>HTML pages</li>
<li>related assets for those pages (e.g. JavaScript, CSS, images, fonts)</li>
<li>other linked assets (or &ldquo;attachments&rdquo;) such as CSVs, PDFs etc</li>
</ul>
<h2 id='architecture'>Architecture</h2><h3 id='how-content-flows-through-the-mirror-system'>How content flows through the mirror system</h3><p>The GOV.UK mirror system operates in two main flows:</p>
<h4 id='1-content-population-flow-nightly'>1. Content Population Flow (Nightly)</h4><p>The <a href="https://github.com/alphagov/govuk-helm-charts/tree/main/charts/mirror">govuk-mirror-sync cronjob</a> crawls content, saves it locally, and distributes it across multiple storage locations for redundancy.</p>

<pre lang="mermaid">
<code>
flowchart TB
    A[govuk-mirror-sync<br/>cronjob in Argo] --> B[Crawl www &<br/>assets domains]
    B --> C[Save pages<br/>to local disk]
    C --> D[Upload files to Primary S3 Bucket]
    D --> E[Primary S3<br/>govuk-env-mirror<br/>eu-west-2]
    E --> |"Production Only"| F[S3 Replication]
    E --> |"Staging & Production"|H[GCS Transfer<br/>Service]
    F --> G[Secondary S3<br/>govuk-env-mirror-replica<br/>eu-west-1<br/>Production only]
    H --> I[Tertiary GCS<br/>govuk-env-mirror<br/>Staging & Production]
</code>
</pre>
<h4 id='2-content-serving-flow-on-origin-failure'>2. Content Serving Flow (On Origin Failure)</h4><p>When Fastly cannot reach our origin servers, it attempts to serve content from mirrors in priority order.</p>

<pre lang="mermaid">
<code>
flowchart TB
    I[User Request] --> J[Fastly CDN]
    J --> K{Fetch<br/>from Origin}
    K -->|"200 OK"| L[Serve from<br/>Origin]
    K -->|"5xx/timeout"| T{Stale Cache<br/>Available?<br/>up to 24h}
    T -->|Yes| U[Serve Stale<br/>from Cache]
    T -->|No| M[Fall back to<br/>Primary S3 Mirror]
    M --> N{Success?}
    N -->|Yes| O[Serve from<br/>Primary]
    N -->|No| P[Try Secondary<br/>S3 Mirror]
    P --> Q{In Production<br/>and Successful?}
    Q -->|Yes| R[Serve from<br/>Secondary]
    Q -->|No| S[Try Tertiary<br/>GCS Mirror]
</code>
</pre>
<h2 id='available-mirrors'>Available mirrors</h2><p>We maintain three mirrors, ranked by priority:</p>

<ol>
<li>Primary: AWS S3 bucket named <code>govuk-&lt;environment&gt;-mirror</code> in eu-west-2</li>
<li>Secondary: AWS S3 bucket named <code>govuk-&lt;environment&gt;-mirror-replica</code> in eu-west-1 (production only)</li>
<li>Tertiary: Google Cloud Storage (GCS) bucket named <code>govuk-&lt;environment&gt;-mirror</code> (staging and production only)</li>
</ol>
<p>We use multiple mirrors across various AWS regions and GCP to ensure redundancy and increase availability.</p>
<p>Having our primary mirror in eu-west-2 is a conscious decision to improve redundancy in the instance that a problem with eu-west-1 is the cause of an outage that has impacted our compute capacity.</p>
<h3 id='gcp-gcs-mirror'>GCP (GCS) Mirror</h3><h4 id='accessing-the-gcp-project'>Accessing the GCP Project</h4><p>Each environment&rsquo;s Google Cloud resources live inside the relevant Project for the environment, e.g. &ldquo;GOVUK Integration&rdquo;, &ldquo;GOVUK Staging&rdquo;, etc.</p>
<p>If you want to access the GCP resources for the Integration environment, first <a href="/manual/google-cloud-platform-gcp.html#gcp-access">make sure you have access to GCP</a> and then you can access these through the Google Cloud Console by navigating to:</p>
<p><code>Open Project Picker (⌘+O)</code> -&gt; <code>GOVUK Integration</code></p>
<p>Then you can access the Bucket and Storage Transfer Jobs.</p>
<h4 id='gcs-bucket'>GCS Bucket</h4><p>For example, in Integration, you can access these through the Google Cloud Console by navigating to:</p>
<p><code>Cloud Storage</code> -&gt; <code>Buckets</code> -&gt; <code>govuk-integration-mirror</code></p>
<p>Once there you should find the relevant directory structure for <code>assets</code> and <code>www.gov.uk</code>.</p>
<h4 id='storage-transfer-job'>Storage Transfer Job</h4><p>To find the job that manages the transfer from the AWS S3 Bucket to the GCS Bucket, navigate to:</p>
<p><code>Storage transfer</code> -&gt; <code>Transfer jobs</code></p>
<p>From there, you should see all the configured transfer jobs (currently just one at the time of writing) and can view the configuration and history of them, such as:</p>

<ul>
<li>Bytes copied</li>
<li>Bandwidth</li>
<li>Errors</li>
<li>Number of objects</li>
<li>Daily run histoy</li>
</ul>
<p>You may find the Terraform that configures the Storage Transfer <a href="https://github.com/alphagov/govuk-aws/blob/81ee9f6e91fd8692fbf751ecf980c671c13aa3c0/terraform/projects/infra-google-mirror-bucket/main.tf#L124">here</a>.</p>
<h2 id='when-is-the-gov-uk-mirror-used'>When is the GOV.UK mirror used?</h2><p>If <a href="/manual/cdn.html">Fastly, our primary CDN</a>, cannot fetch a page from our backend servers (because of a timeout or a 5xx error), then Fastly will attempt to serve a page from a mirror in order of priority.</p>
<h3 id='fastly-failover-behavior'>Fastly failover behavior</h3><p>When the origin is unavailable:</p>

<ol>
<li>Fastly first attempts to serve the page from the <strong>primary S3 mirror</strong> (eu-west-2)</li>
<li>If that fails, it tries the <strong>secondary S3 replica</strong> (eu-west-1, production only)</li>
<li>As a final fallback, it attempts the <strong>tertiary GCS mirror</strong></li>
</ol>
<p>This layered approach ensures maximum availability even if individual mirror buckets have issues.</p>
<h2 id='how-are-the-mirrors-populated'>How are the mirrors populated?</h2><p>Every night the <a href="https://github.com/alphagov/govuk-helm-charts/tree/main/charts/mirror">govuk-mirror-sync cronjob</a> crawls the www and assets domains, saves pages and assets to disk and then uploads the files to the primary S3 bucket. The <a href="https://github.com/alphagov/govuk-mirror">govuk-mirror</a> repository contains the code responsible for crawling and saving pages to disk.</p>
<p>S3 Replication automatically copies any changes from the primary S3 bucket to the secondary S3 bucket. This is configured in <a href="https://github.com/alphagov/govuk-infrastructure/blob/e6c2c58b9f1c9e530d4aa270d24e36ec3a8792c3/terraform/deployments/govuk-publishing-infrastructure/govuk_mirror_sync.tf#L235">govuk-aws</a>.</p>
<p>GCP Storage Transfer Service copies any changes from the primary S3 bucket to the tertiary GCS bucket.</p>
<h2 id='what-is-not-covered-by-mirrors'>What is not covered by mirrors?</h2><p>Certain page types aren&rsquo;t included in the mirrors:</p>

<ul>
<li>Smart answer pages (as the govuk-mirror crawler doesn&rsquo;t support following form links)</li>
<li><a href="https://github.com/alphagov/govuk-helm-charts/pull/1337">CSV preview pages</a></li>
</ul>
<h2 id='monitoring-health-checks'>Monitoring &amp; Health Checks</h2><h3 id='success-signals'>Success signals</h3><p>A healthy mirror sync can be verified through:</p>
<p><strong>Job completion time:</strong></p>

<ul>
<li>Normal runs typically complete in about <strong>8-9 hours</strong></li>
<li>Check the <a href="https://argo.eks.production.govuk.digital/applications/cluster-services/mirror?view=tree">govuk-mirror-sync job in Argo</a> for completion status and duration</li>
</ul>
<p><strong>Content freshness:</strong></p>

<ul>
<li>Pages published on a given day should appear in the mirror within <strong>24 hours</strong> (by the next nightly sync)</li>
<li>Spot-check recently published content by fetching directly from mirrors using the <code>Backend-Override</code> header</li>
</ul>
<p><strong>Storage verification:</strong></p>

<ul>
<li>Check that all three mirror buckets (primary S3, secondary S3, tertiary GCS) contain recently updated objects</li>
<li>Verify object counts and total storage sizes are roughly consistent across mirrors</li>
</ul>
<h3 id='content-level-checks'>Content-level checks</h3><p>To verify mirror content is up to date:</p>

<ol>
<li>Identify a page published in the last 24 hours from the publishing pipeline</li>
<li>Fetch it from the primary mirror: <code>curl -H &#39;Backend-Override: mirrorS3&#39; https://www.gov.uk/path/to/page</code></li>
<li>Confirm the page content matches what&rsquo;s expected</li>
</ol>
<h4 id='automatic-drift-detection'>Automatic drift detection</h4><p>Multiple times a week, <a href="https://github.com/alphagov/govuk-mirror/tree/main/internal/drift_checker">an automatic process</a> compares 200 pages on the site. The 200 pages are selected from among the
1000 most popular pages on the day 48 hours prior to the process commencing. We do this to avoid finding lots
of false positives among pages that are new and popular and have yet to be mirrored.</p>
<p>The process looks to see if the version in the mirror is different from live version. We expect that for the majority of
the pages compared, the contents will be identical. For a small number we expect them to have very small differences,
such as the publishing date (when a page has been edited between the mirroring process and drift check).</p>
<p>A large number of pages with differences indicates that something is wrong with the mirroring process.</p>
<p>The HTML of our pages changes frequently in ways that have no impact on how it is displayed: for example, nonce values
associated with script blocks. To avoid false positives, when the process can be sure that both the live and mirror page
are HTML, it extracts and compares the visible text on the pages. It compares these instead of comparing the HTTP
response body as a generic string.</p>
<p>For every other content type, or when the mirror and live pages disagree, the raw HTTP response bodies are compared.</p>
<p>When any drifts are detected, an alert is issued in Slack.</p>
<h2 id='failure-indicators'>Failure Indicators</h2><h3 id='signs-that-mirrors-may-need-investigation'>Signs that mirrors may need investigation</h3><p><strong>Job-level failures:</strong></p>

<ul>
<li>govuk-mirror-sync job fails to complete in Argo</li>
<li>Job runs significantly longer or slower than usual (more than 9 hours)</li>
<li>Job finishes much quicker than expected (e.g. 30 minutes)</li>
<li>Error messages in job logs indicating crawl failures or upload issues</li>
</ul>
<p><strong>Storage-level issues:</strong></p>

<ul>
<li>One or more mirror buckets are empty or contain significantly fewer objects than expected</li>
<li>Last modified timestamps on bucket objects are more than 24-48 hours old</li>
<li>S3 replication or GCS transfer metrics show failures</li>
</ul>
<p><strong>Serving-level problems:</strong></p>

<ul>
<li>Users report stale content when origin is supposedly healthy</li>
<li>Direct mirror fetches return 404s for content that should exist</li>
</ul>
<h3 id='investigation-steps'>Investigation steps</h3><p>If you suspect mirror issues:</p>

<ol>
<li><strong>Check the mirror sync job</strong>: Review <a href="https://dashboard.logit.io">LogIt</a> for errors during crawl, save, or upload phases - use field selector: <code>kubernetes.labels.app_kubernetes_io/name = mirror</code></li>
<li><strong>Verify bucket contents</strong>: Check AWS S3 Console and GCP Console to confirm buckets are populated and recently updated</li>
<li><strong>Test direct access</strong>: Use <code>curl</code> with <code>Backend-Override</code> header to fetch from each mirror and verify responses</li>
<li><strong>Review Fastly logs</strong>: Check if Fastly is falling back to mirrors unexpectedly</li>
<li><strong>Check replication status</strong>: Verify S3 replication metrics and GCS transfer job status</li>
</ol>
<h2 id='troubleshooting'>Troubleshooting</h2><h3 id='how-to-poke-it'>How to poke it</h3><p>You can test mirrors directly during incidents or investigation:</p>
<p><strong>Fetch a page from each mirror:</strong></p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="c"># Primary S3 mirror (eu-west-2)</span>
curl <span class="nt">-H</span> <span class="s1">'Backend-Override: mirrorS3'</span> https://www.gov.uk/

<span class="c"># Secondary S3 replica (eu-west-1, production only)</span>
curl <span class="nt">-H</span> <span class="s1">'Backend-Override: mirrorS3Replica'</span> https://www.gov.uk/

<span class="c"># Tertiary GCS mirror</span>
curl <span class="nt">-H</span> <span class="s1">'Backend-Override: mirrorGCS'</span> https://www.gov.uk/
</code></pre></div><p><strong>Check for specific content:</strong></p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="c"># Fetch a recently published page</span>
curl <span class="nt">-H</span> <span class="s1">'Backend-Override: mirrorS3'</span> https://www.gov.uk/government/publications/example

<span class="c"># Fetch an asset</span>
curl <span class="nt">-H</span> <span class="s1">'Backend-Override: mirrorS3'</span> https://assets.publishing.service.gov.uk/path/to/asset.pdf
</code></pre></div><p>The <a href="https://github.com/alphagov/govuk-fastly/blob/68427d372df05fd23c6851cfbea610845c6c3997/modules/www/www.vcl.tftpl#L258-L289">allowed values</a> for <code>Backend-Override</code> are <code>mirrorS3</code>, <code>mirrorS3Replica</code> and <code>mirrorGCS</code>.</p>
<h3 id='common-checks'>Common checks</h3><p><strong>Review job logs:</strong></p>
<p>Check the logs in <a href="https://dashboard.logit.io">LogIt</a> for any errors during crawling, saving pages or uploading to S3.</p>
<p>You can filter the correct logs by using the following field selector: <code>kubernetes.labels.app_kubernetes_io/name = mirror</code>.</p>
<p><strong>Verify bucket contents:</strong></p>

<ol>
<li><strong>AWS S3</strong>: Check the AWS Console for buckets <code>govuk-&lt;environment&gt;-mirror</code> and <code>govuk-&lt;environment&gt;-mirror-replica</code></li>
<li><strong>GCP</strong>: Check the GCP Console for bucket <code>govuk-&lt;environment&gt;-mirror</code></li>
<li>Look for recent object modification times and verify object counts</li>
</ol>
<p><strong>Check replication:</strong></p>

<ul>
<li>S3 replication metrics in AWS Console</li>
<li>GCS Storage Transfer Service job status in GCP Console</li>
</ul>
<h2 id='known-gaps-potential-future-work'>Known Gaps &amp; Potential Future Work</h2><p>Areas where the mirror and related components could be improved:</p>
<p><strong>Operational improvements:</strong></p>

<ul>
<li>Better visibility into which mirror Fastly is actually serving from during failover scenarios</li>
<li>Clearer runbook for what to do if all mirrors are stale or unavailable</li>
<li>Differential or incremental changes to the sync script to reduce the time and costs required</li>
</ul>

  <div class='related-content'>

    <h3>More in the Deployment section</h3>

    <div class='govuk-grid-row'>
        <div class='govuk-grid-column-one-half'>
          <h4>Learn</h4>

          <ul class="govuk-list">
            <li><a href="/manual/development-pipeline.html">The development pipeline</a></li>
          </ul>
        </div>

        <div class='govuk-grid-column-one-half'>
          <h4>How to...</h4>

          <ul class="govuk-list">
            <li><a href="/manual/github-unavailable.html">Deploy when GitHub is unavailable</a></li>
            <li><a href="/manual/deployments.html">Deployments</a></li>
            <li><a href="/manual/fall-back-to-aws-cloudfront.html">Fall back to AWS CloudFront</a></li>
            <li><a href="/manual/publish-special-routes.html">Publish special routes</a></li>
            <li><a href="/manual/running-rake-tasks.html">Run a rake task</a></li>
            <li><a href="/manual/review-apps.html">Set up Heroku review apps for pull requests</a></li>
          </ul>
        </div>

    </div>
</div>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/master/source/manual/fall-back-to-mirror.html.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27GOV.UK+content+mirrors%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Fmanual%2Ffall-back-to-mirror.html%29&amp;labels=bug&amp;title=Re%3A+%27GOV.UK+content+mirrors%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
