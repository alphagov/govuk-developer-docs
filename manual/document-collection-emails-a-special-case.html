





<!doctype html>
<html lang="en" class="govuk-template govuk-template--rebranded no-js">
  <head>
    
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Document Collection emails - a special case - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/manual/document-collection-emails-a-special-case.html">
      <link rel="icon" sizes="48x48" href="/assets/govuk/assets/rebrand/images/favicon.ico">
      <link rel="icon" sizes="any" href="/assets/govuk/assets/rebrand/images/favicon.svg" type="image/svg+xml">
      <link rel="mask-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-mask.svg" color="#0b0c0c">
      <link rel="apple-touch-icon" href="/assets/govuk/assets/rebrand/images/govuk-icon-180.png">
      <link rel="manifest" href="/assets/govuk/assets/rebrand/manifest.json">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta name="twitter:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta name="twitter:title" content="Document Collection emails - a special case - GOV.UK Developer Documentation" />
      <meta name="twitter:url" content="https://docs.publishing.service.gov.uk/manual/document-collection-emails-a-special-case.html" />

      <meta property="og:image" content="https://docs.publishing.service.gov.uk/assets/govuk/assets/rebrand/images/govuk-opengraph-image.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="Document Collection emails - a special case" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/manual/document-collection-emails-a-special-case.html" />

      <script>
  document.addEventListener('DOMContentLoaded', function () {
    var markup = `<div id="global-cookie-message" data-module="cookie-banner" data-nosnippet="" aria-label="Can we store analytics cookies on your device?" class="gem-c-cookie-banner govuk-clearfix govuk-cookie-banner js-banner-wrapper" role="region" hidden="hidden" title="Can we store analytics cookies on your device?"> <div class="govuk-cookie-banner__message govuk-width-container"> <div class="govuk-grid-row"> <div class="govuk-grid-column-two-thirds"> <h2 class="govuk-cookie-banner__heading govuk-heading-m">Can we store analytics cookies on your device?</h2> <div tabindex="-1" class="govuk-cookie-banner__content gem-c-cookie-banner__confirmation"> <div class="gem-c-cookie-banner__content"><p class='govuk-body'>We’d like to set some cookies to understand how you use this site and remember your settings.</p><p class='govuk-body'>We also use cookies set by other sites to help us deliver content from their services.</p></div> <p class="gem-c-cookie-banner__confirmation-message--accepted govuk-body" hidden data-ga4-cookie-banner data-module="ga4-link-tracker" data-ga4-track-links-only data-ga4-set-indexes data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" >You have accepted additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> <p class="gem-c-cookie-banner__confirmation-message--rejected govuk-body" hidden>You have rejected additional cookies. <span class="gem-c-cookie-banner__confirmation-message">You can <a class="govuk-link" href="/cookies.html">change your cookie settings</a> at any time.</span></p> </div> </div> </div> <div class="js-confirmation-buttons govuk-button-group"> <button class="gem-c-button govuk-button" type="submit" data-accept-cookies="true" data-cookie-types="all">Accept additional cookies</button> <button class="gem-c-button govuk-button" type="submit" data-reject-cookies="true">Reject additional cookies</button> <a class="govuk-link" href="/cookies.html">View cookies</a> </div> <div hidden class="js-hide-button govuk-button-group"> <button class="gem-c-cookie-banner__hide-button govuk-button" data-hide-cookie-banner="true" data-module="ga4-event-tracker" data-ga4-event="{&quot;event_name&quot;:&quot;select_content&quot;,&quot;type&quot;:&quot;cookie banner&quot;,&quot;action&quot;:&quot;closed&quot;,&quot;section&quot;:&quot;You have accepted additional cookies&quot;}" > Hide cookie message </button> </div> </div> </div>`;
    var banner = document.createElement('div');
    banner.innerHTML = markup;
    document.body.prepend(banner);
  })
</script>


  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <svg
          focusable="false"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 324 60"
          height="30"
          width="162"
          fill="currentcolor"
          class="govuk-header__logotype"
          aria-label="GOV.UK">
          <title>GOV.UK</title>
          <g>
            <circle cx="20" cy="17.6" r="3.7"></circle>
            <circle cx="10.2" cy="23.5" r="3.7"></circle>
            <circle cx="3.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <circle cx="43.3" cy="17.6" r="3.7"></circle>
            <circle cx="53.2" cy="23.5" r="3.7"></circle>
            <circle cx="59.7" cy="33.2" r="3.7"></circle>
            <circle cx="31.7" cy="30.6" r="3.7"></circle>
            <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
          </g>
          <circle class="govuk-logo-dot" cx="226" cy="36" r="7.3"/>
          <path d="M93.94 41.25c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21s3.21 1.2 5.22 1.2 3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01s.4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2s-2.41.4-3.81.4a18.56 18.56 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02s-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83a20.45 20.45 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21s2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.81-.6 3.71-.6 5.42s.8 5.22.8 5.22Zm57.8-27.9c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82S170.2 24.39 171 27s1.4 5.62 1.4 8.83-.4 6.02-1.4 8.83-2.41 5.02-4.01 7.02-4.01 3.61-6.62 4.82-5.42 1.81-8.63 1.81-6.22-.6-8.63-1.81-4.82-2.81-6.42-4.82-3.21-4.41-4.01-7.02-1.4-5.62-1.4-8.83.4-6.02 1.4-8.83 2.41-5.02 4.01-7.02 4.01-3.61 6.42-4.82 5.42-1.81 8.63-1.81Zm0 36.73c1.81 0 3.61-.4 5.02-1s2.61-1.81 3.61-3.01 1.81-2.81 2.21-4.41c.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.02s-1.2-3.21-2.21-4.62c-1-1.2-2.21-2.21-3.61-3.01s-3.21-1-5.02-1-3.61.4-5.02 1c-1.4.8-2.61 1.81-3.61 3.01s-1.81 2.81-2.21 4.62c-.4 1.81-.8 3.61-.8 5.62 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41s2.21 2.21 3.61 3.01c1.4.8 3.21 1 5.02 1Zm36.32 7.96-12.24-44.15h9.83l8.43 32.77h.4l8.23-32.77h9.83L200.3 58.04h-12.24Zm74.14-7.96c2.18 0 3.51-.6 3.51-.6 1.2-.6 2.01-1 2.81-1.81s1.4-1.81 1.81-2.81a13 13 0 0 0 .8-4.01V13.9h8.63v28.15c0 2.41-.4 4.62-1.4 6.62-.8 2.01-2.21 3.61-3.61 5.02s-3.41 2.41-5.62 3.21-4.62 1.2-7.02 1.2-5.02-.4-7.02-1.2c-2.21-.8-4.01-1.81-5.62-3.21s-2.81-3.01-3.61-5.02-1.4-4.21-1.4-6.62V13.9h8.63v26.95c0 1.61.2 3.01.8 4.01.4 1.2 1.2 2.21 2.01 2.81.8.8 1.81 1.4 2.81 1.81 0 0 1.34.6 3.51.6Zm34.22-36.18v18.92l15.65-18.92h10.82l-15.03 17.32 16.03 26.83h-10.21l-11.44-20.21-5.62 6.22v13.99h-8.83V13.9"/>
        </svg>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/manual.html" aria-current="page">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/kubernetes/">Kubernetes</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/repos.html">Repos</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/mobile/">Mobile</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="/">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <a href='/manual.html' class="toc__back-link govuk-link">&lsaquo; Manual</a>
  <ul>
  <li>
    <a href="#header"><span>Document Collection emails - a special case</span></a>
    <ul>
      <li>
        <a href="#background-specialist-topics-retirement"><span>Background: specialist topics retirement</span></a>
        <ul>
          <li>
            <a href="#specialist-topic-email-subscriptions"><span>Specialist topic email subscriptions</span></a>
          </li>
          <li>
            <a href="#key-differences-between-specialist-topic-and-document-collection-email-subcriptions"><span>Key differences between specialist topic and document collection email subcriptions</span></a>
          </li>
          <li>
            <a href="#what-is-a-taxonomy-topic-email-override"><span>What is a Taxonomy topic email override</span></a>
          </li>
          <li>
            <a href="#how-does-the-taxonomy-topic-email-override-field-work"><span>How does the Taxonomy topic email override field work</span></a>
          </li>
          <li>
            <a href="#how-to-set-a-taxonomy_topic_email_override"><span>How to set a taxonomy_topic_email_override</span></a>
          </li>
          <li>
            <a href="#what-to-do-if-youre-asked-to-set-or-update-a-taxonomy-topic-email-override-field-on-a-live-page"><span>What to do if you’re asked to set or update a taxonomy topic email override field on a live page</span></a>
          </li>
          <li>
            <a href="#setting-a-taxonomy_topic_email_override-if-the-original-document-collection-was-published-without-one"><span>Setting a taxonomy_topic_email_override if the original document collection was published without one</span></a>
          </li>
          <li>
            <a href="#overriding-an-existing-taxonomy_topic_email_override-for-previously-published-pages"><span>Overriding an existing taxonomy_topic_email_override for previously published pages</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
                
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "name": "Home",
        "@id": "http://www.dev.gov.uk/"
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "name": "Emails",
        "@id": "http://www.dev.gov.uk/manual.html#emails"
      }
    }
  ]
}
</script>

<nav data-module="ga4-link-tracker" aria-label="Breadcrumb" class="gem-c-breadcrumbs govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;1&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/">Home</a>
        </li>
        <li class="govuk-breadcrumbs__list-item">
          <a data-ga4-link="{&quot;event_name&quot;:&quot;navigation&quot;,&quot;type&quot;:&quot;breadcrumb&quot;,&quot;index_link&quot;:&quot;2&quot;,&quot;index_total&quot;:&quot;2&quot;}" class="govuk-breadcrumbs__link" href="/manual.html#emails">Emails</a>
        </li>
  </ol>
</nav>
   <div class="govuk-!-font-size-16 govuk-!-margin-top-6">
    <div class="govuk-warning-text">
      <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
      <strong class="govuk-warning-text__text">
        <span class="govuk-warning-text__assistive">Warning</span>
        This document has not been updated for a while now. It may be out of date.
      </strong>
    </div>

  Last updated: <a href="https://github.com/alphagov/govuk-developer-docs/commit/5932c91070ca853b95532065b7cc5249c6beefe1">4 Jun 2024</a>
</div>

 <h1 id='header'>Document Collection emails - a special case</h1> <p><a href="/document-types/document_collection.html">Document collections</a> are a type of GOV.UK page that is published by Whitehall, and rendered by <a href="https://github.com/alphagov/government-frontend">government-frontend</a>. This documentation seeks to explain how emails work on document collection pages, because at the time of writing, both the signup journey and the resulting email subscription for these pages are unique.</p>
<h2 id='background-specialist-topics-retirement'>Background: specialist topics retirement</h2><p>Prior to 2024, GOV.UK had three taxonomies:</p>

<ul>
<li>Taxonomy Topics (<code>taxons</code>)</li>
<li>Mainstream Browse pages (<code>mainstream_browse_page</code>)</li>
<li>Specialist Topics (<code>topic</code>)</li>
</ul>
<p>In 2024, the Navigation team retired the Specialist Topic taxonomy. A result of this work was the roll out of two new email features that are present on document collection pages only.</p>
<p>To understand why this complexity was needed, it&rsquo;s necessary to explain how specialist topics were retired, and the consequences of the retirement for email subscribers.</p>
<h3 id='specialist-topic-email-subscriptions'>Specialist topic email subscriptions</h3><p>Like taxonomy topics, specialist topics supported email alerts i.e. it was possible for a user to subscribe to emails on a specialist topic page. As part of the retirement work, most specialist topic pages were archived and redirected to existing content on GOV.UK, and any email subscriptions were terminated.</p>
<p>However around 50 high performing specialist topic pages were converted into document collections, and the original specialist topic page was redirected to the document collection conversion. For these pages, the migration of email subscribers from the specialist topic subscriber list, to the new document collection subscriber list was permitted.</p>
<p>In the majority of these 50 pages, this is the action that was taken. However one department was concerned that a document collection email subscription was so different from a specialist topic email subscription, that the migration would not meet the needs of its existing and future email subscribers.</p>
<p>It was necessary to address their concerns to unblock the retirement of specialist topics.</p>
<h3 id='key-differences-between-specialist-topic-and-document-collection-email-subcriptions'>Key differences between specialist topic and document collection email subcriptions</h3><h4 id='breadth-of-subscription'>Breadth of subscription</h4>
<ul>
<li><p>A specialist topic email subscription would notify users when any content tagged to the specialist topic was updated and published as a major change. This meant that a specialist topic email subscription was very broad, because there was no limit to the number of pages that could be tagged to a specialist topic.</p></li>
<li><p>A document collection email subscription notifies users when either content listed on the document collection page, or the page itself, is updated and published as a major change. There is no technical limit to the number of links that can be added to a document collection, but sensible content design means that the number of linked content items on a document collection is far less than the number of pages that might be tagged to a specialist topic. For this reason a document collection email subscription is much narrower in scope.</p></li>
</ul>
<p>To address this difference, and unblock the retirement of specialist topics, a new feature was rolled out called a <a href="#what-is-a-taxonomy-topic-email-override">Taxonomy topic email override</a>.</p>
<p>This feature allows users to subscribe to a related taxonomy topic email list from a document collection page.</p>
<p>A taxonomy topic email subscription is similar to a specialist topic subscription, because an email is triggered when changes are made to content tagged to the taxonomy topic. Provided all content that was previously tagged to the specialist topic, was now tagged to the related taxonomy topic, the email subscriptions created would be similar.</p>
<h4 id='requirement-for-a-gov-uk-account'>Requirement for a GOV.UK Account</h4>
<ul>
<li><p>On Specialist topic pages, users subscribed to email alerts via the <a href="/manual/email-signup-journeys.html#subscription-links-component">Subscription links component</a>. This signup journey involved a user entering their email address and being sent a magic link to confirm their subscription. It was not necessary for the user to create or have an existing GOV.UK Account.</p></li>
<li><p>Document collection pages by contrast used the <a href="/manual/email-signup-journeys.html#single-page-notification-button-component">Single page notification button component</a> as a route into the sign up journey. This journey was hardcoded to enfore the GOV.UK Account, in other words clicking the button took the user directly to the account signup/signin page. It was not possible to subscribe to email alerts without having or creating a GOV.UK Account.</p></li>
</ul>
<p>To address this difference, and unblock the retirement of specialist topics, a new variant of the single page notification button component was rolled out on document collection pages. <a href="/manual/email-signup-journeys.html#how-does-the-skip-account-feature-work">This variant is configured to skip the GOV.UK Account</a>, and sign the user up via a magic link instead.</p>
<p>It&rsquo;s worth highlighting that although the single page notification button looks the same to the user, the page they are taken to after clicking the button on a document collection page is different to the page they are taken to when clicking the identical button on all other page types.</p>
<h3 id='what-is-a-taxonomy-topic-email-override'>What is a Taxonomy topic email override</h3>
<ul>
<li><p>A <code>taxonomy_topic_email_override</code> is a type of edition_link that&rsquo;s added to the content item of a Document collection when it&rsquo;s <a href="https://github.com/alphagov/whitehall/blob/21f85c4b483e907e6e57aa27507c261d3f08a50a/app/presenters/publishing_api/document_collection_presenter.rb#L46">published</a> from Whitehall.</p></li>
<li><p>It&rsquo;s set via a rake task in Whitehall, full guidance is given in the section <a href="#1-find-the-content-id-of-the-document-collection">How to set a taxonomy_topic_email_override</a></p></li>
<li><p>It stores the content_id of a taxonomy topic that a user will be subcribed to when signing up for emails on the document collection page.</p></li>
<li><p><strong>It <a href="https://github.com/alphagov/publishing-api/blob/main/content_schemas/formats/document_collection.jsonnet#L69-L71">can only be added to document collections</a> that have never previously been published.</strong></p></li>
</ul>
<h3 id='how-does-the-taxonomy-topic-email-override-field-work'>How does the Taxonomy topic email override field work</h3><p>When rendering a document collection page, government-frontend checks for the presence of a <code>taxonomy_topic_email_override</code> link in the content item.</p>

<ul>
<li><p>If a link is found, the page is rendered with a <a href="/manual/email-signup-journeys.html#sign-up-link-component">sign up link component</a> that will find or create a taxonomy topic email subscription for the topic stored in the field.</p></li>
<li><p>If no link is found, the page is rendered with a <a href="/manual/email-signup-journeys.html#single-page-notification-button-component">single page notification button</a> that will sign the user up to a standard document collection email list instead.</p></li>
</ul>
<h3 id='how-to-set-a-taxonomy_topic_email_override'>How to set a taxonomy_topic_email_override</h3><p>It is only possible to set this field on document collections that have never been published before.</p>

<blockquote>
<p>Once a document is published with a <code>taxonomy_topic_email_override</code>, the field cannot be changed.</p>
</blockquote>
<h4 id='warning-do-not-set-this-field-unless-you-have-an-exceptionally-good-reason'>Warning: Do not set this field unless you have an exceptionally good reason</h4><p>The following developer steps should <strong>only</strong> be taken if the request has comes from a content designer that has followed the guidance set out in <a href="https://docs.google.com/document/d/1MR5OaFG_DOCmWGL9o9MSGIPLMFe2mmSrV6Va-99cSzw/edit#heading=h.y6ckz26uo2lf">HMRC topic document collections: guidance for JCDs on 2nd line</a>. This is because once published, the field cannot be changed, so it&rsquo;s important that any government publisher requesting this feature has been talked through the risks and benefits before the override is set.</p>
<h4 id='step-one-find-the-id-of-the-document-collection'>Step one - Find the id of the document collection</h4>
<ol>
<li>Log into the whitehall admin UI via signon.</li>
<li>The ID can be taken from the URL of the document collection. E.g. <code>12345</code> for a document_collection at URL <code>whitehall-admin.publishing.service.gov.uk/government/admin/collections/12345</code></li>
</ol>
<h4 id='step-two-run-the-rake-task'>Step two -  Run the rake task</h4><p>The <code>taxonomy_topic_email_override</code> field can be set by running the following <a href="https://github.com/alphagov/whitehall/blob/main/lib/tasks/set_taxonomy_topic_email_override.rake">rake task</a> from a Whitehall machine. This task runs in <code>dry_run</code> mode by default, unless a confirmation string is passed in. If the document collection has previously been published an error will be raised.</p>
<p>Dry run: <code>rake:set_taxonomy_topic_email_override[document_collection_id,taxon_content_id]</code></p>
<p>For real: <code>rake:set_taxonomy_topic_email_override[document_collection_id,taxon_content_id,run_for_real]</code></p>
<h3 id='what-to-do-if-youre-asked-to-set-or-update-a-taxonomy-topic-email-override-field-on-a-live-page'>What to do if you&rsquo;re asked to set or update a taxonomy topic email override field on a live page</h3><p>As mentioned above, it is not possible to set this field unless the document collection is new and has not been published before.</p>
<p>However it is possible to create new content with a <code>taxonomy_topic_email_override</code>, to replace the original.</p>
<p>The steps to take depend on whether the original document collection was published with or without an override.</p>
<h3 id='setting-a-taxonomy_topic_email_override-if-the-original-document-collection-was-published-without-one'>Setting a <code>taxonomy_topic_email_override</code> if the original document collection was published without one</h3><h4 id='step-one-create-a-replacement-document-collection'>Step one - create a replacement document collection</h4>
<ol>
<li>The department must create a draft for a new document collection, that will replace the existing one.</li>
<li>A developer sets a taxonomy topic email override on the replacement document by following the steps <a href="#1-find-the-content-id-of-the-document-collection">above</a>.</li>
<li>The department confirms that the email override has been set to the correct taxonomy topic by checking the email notification tab on the document collection edit page in Whitehall. <strong>The department must not publish the page until Step two below is complete.</strong></li>
<li>Department publishes the page.</li>
<li>Content designer unpublishes the original page and creates a redirect from the old document collection to the new document collection.</li>
</ol>
<h4 id='step-two-migrate-any-orphaned-email-subscribers'>Step two - migrate any orphaned email subscribers</h4><p>As described <a href="#how-does-the-taxonomy-topic-email-override-field-work">above</a>, if the original page was published without a taxonomy_topic_email_override, the page would have displayed a single page notification button that subscribed users to a standard document collection email list.</p>
<p>Those email subscribers can be bulk migrated to the appropriate taxonomy topic SubscriberList before the document collection page is unpublished and redirected.</p>
<p>Run the <code>data_migration:move_all_subscribers</code> <a href="https://github.com/alphagov/email-alert-api/blob/main/lib/tasks/data_migration.rake#L4-L11">rake task</a> from an email-alert-api machine.</p>
<h3 id='overriding-an-existing-taxonomy_topic_email_override-for-previously-published-pages'>Overriding an existing <code>taxonomy_topic_email_override</code> for previously published pages</h3><p>In this case, we can create replacement content as described in <a href="#step-one---create-a-replacement-document-collection">step one</a> above. However we cannot migrate any email subscribers that have signed up whilst the page was live.</p>
<p>This is because if the original page was published with an override, the page would have displayed a sign up link that subscribed users to a taxonomy topic email list as described in the section <a href="#how-does-the-taxonomy-topic-email-override-field-work">How does the Taxonomy topic email override field work</a>.</p>
<p>Email alert API does not store information about the page from which a user subscribed to a links-based list. So it is not possible to confidently identify the users that need to be migrated (as some could have signed up from the taxonomy page itself). This limitation/risk was acknowledged by both the department, and senior leadership when the feature was rolled out.</p>

  <div class='related-content'>

    <h3>More in the Emails section</h3>

    <div class='govuk-grid-row'>
        <div class='govuk-grid-column-one-half'>
          <h4>Learn</h4>

          <ul class="govuk-list">
            <li><a href="/manual/email-notifications-how-they-work.html">Email notifications: how they work</a></li>
            <li><a href="/manual/email-signup-journeys.html">Email signup journeys and email subscriptions across GOV.UK</a></li>
            <li><a href="/manual/govuk-notify.html">How we use GOV.UK Notify</a></li>
          </ul>
        </div>

        <div class='govuk-grid-column-one-half'>
          <h4>How to...</h4>

          <ul class="govuk-list">
            <li><a href="/manual/get-emails-about-this-page.html">Handle exemptions to the ‘Get emails about this page’ feature</a></li>
          </ul>
        </div>

    </div>
</div>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/master/source/manual/document-collection-emails-a-special-case.html.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?body=Problem+with+%27Document+Collection+emails+-+a+special+case%27+%28https%3A%2F%2Fdocs.publishing.service.gov.uk%2Fmanual%2Fdocument-collection-emails-a-special-case.html%29&amp;labels=bug&amp;title=Re%3A+%27Document+Collection+emails+-+a+special+case%27">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <svg focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 60" height="30" width="32" fill="currentcolor" class="govuk-footer__crown">
    <g>
      <circle cx="20" cy="17.6" r="3.7"></circle>
      <circle cx="10.2" cy="23.5" r="3.7"></circle>
      <circle cx="3.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <circle cx="43.3" cy="17.6" r="3.7"></circle>
      <circle cx="53.2" cy="23.5" r="3.7"></circle>
      <circle cx="59.7" cy="33.2" r="3.7"></circle>
      <circle cx="31.7" cy="30.6" r="3.7"></circle>
      <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"></path>
    </g>
  </svg>
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

        <ul class="govuk-footer__inline-list">
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/accessibility.html">Accessibility</a>
            </li>
            <li class="govuk-footer__inline-list-item">
              <a class="govuk-footer__link" href="/cookies.html">Cookies</a>
            </li>
        </ul>

      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/govuk_frontend.js" type="module"></script>
    <script src="/javascripts/application.js"></script>
  </body>
</html>
